<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.9" />
<title>Funktionen Schreiben in <strong>R</strong></title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


@media screen {
  body {
    max-width: 50em; /* approximately 80 characters wide */
    margin-left: 16em;
  }

  #toc {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 13em;
    padding: 0.5em;
    padding-bottom: 1.5em;
    margin: 0;
    overflow: auto;
    border-right: 3px solid #f8f8f8;
    background-color: white;
  }

  #toc .toclevel1 {
    margin-top: 0.5em;
  }

  #toc .toclevel2 {
    margin-top: 0.25em;
    display: list-item;
    color: #aaaaaa;
  }

  #toctitle {
    margin-top: 0.5em;
  }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(5);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>Funktionen Schreiben in <strong>R</strong></h1>
<span id="author">Anne-Sophie Stelzer, Dominik Cullmann</span><br />
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_worum_geht_es">1. Worum geht es?</h2>
<div class="sectionbody">
<div class="paragraph"><p>Naja, ums Schreiben von Funktionen in der Programmiersprache <strong>R</strong>.</p></div>
<div class="sect2">
<h3 id="_was_sind_funktionen">1.1. Was sind Funktionen?</h3>
<div class="ulist"><ul>
<li>
<p>
Funktionen sind Programmkonstrukte, mit denen Du Teile des von Dir
  geschriebenen Codes wiederverwenden kannst
  (siehe <a href="https://de.wikipedia.org/wiki/Funktion_(Programmierung)">Wikipedia</a>).
</p>
</li>
<li>
<p>
Funktionen sind in den Standardbibliotheken jeder Programmiersprache vorhanden,
  viele <strong>R</strong>-Funktionen kennst Du wahrscheinlich schon: <code>sum()</code>, <code>mean()</code>
  oder <code>summary()</code>.
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_warum_funktionen">1.2. Warum Funktionen?</h3>
<div class="ulist"><ul>
<li>
<p>
Damit Du Teile des von Dir geschriebenen Codes wiederverwenden kannst.
</p>
</li>
<li>
<p>
Damit Du, wenn Du Fehler im Code entdeckst, diese auch nur an einer
  Stelle korrigieren musst.
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_wann_funktionen">1.3. Wann Funktionen?</h3>
<div class="paragraph"><p>Immer wenn Du merkst, dass Du (alten) Code mehrfach kopierst und an anderer
Stelle einfügst ohne ihn stark zu verändern, solltest Du darüber nachdenken,
eine (oder mehrere) Funktion(en)  aus ihm  zu machen.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_eine_funktion_schreiben">2. Eine Funktion schreiben</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_eine_neue_summenfunktion">2.1. Eine neue Summenfunktion</h3>
<div class="paragraph"><div class="title">Warum wir diese Funktion nicht schreiben sollten</div><p>Eine Summenfunktion gibt es wahrscheinlich in jeder Programmiersprache, in <strong>R</strong>
heißt sie <code>sum()</code>. Diese Funktion ist besser, stabiler und schneller, als
alles, das wir selbst programmieren können.</p></div>
<div class="paragraph"><div class="title">Warum wir es trotzdem tun</div><p>Nunja, irgendwelchen Code müssen wir ja nehmen.
Ich habe die Summenberechnung ausführlich als Beispiel zur Schleifenprogrammierung in
<a href="https://fvafrcu.gitlab.io/programmieren_in_r/#gute-schleifen">Programmieren in R</a> benutzt,
    und eine Wiederholung schadet sicher nicht.</p></div>
<div class="sect3">
<h4 id="_vom_code_8230">2.1.1. Vom Code &#8230;</h4>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>a  &lt;- c(2, 3, 4, 10) <span style="font-style: italic"><span style="color: #9A1900"># <b>&lt;1&gt;</b></span></span>
value &lt;- 0 <span style="font-style: italic"><span style="color: #9A1900"># <b>&lt;2&gt;</b></span></span>
<span style="font-weight: bold"><span style="color: #0000FF">for</span></span> (a_i in a) { <span style="font-style: italic"><span style="color: #9A1900"># <b>&lt;3&gt;</b></span></span>
    value &lt;- value + a_i  <span style="font-style: italic"><span style="color: #9A1900"># <b>&lt;4&gt;</b></span></span>
}
print(value) <span style="font-style: italic"><span style="color: #9A1900"># <b>&lt;5&gt;</b></span></span></tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## [1] 19</code></pre>
</div></div>
<div class="paragraph"><p>Dabei siehst Du:</p></div>
<div class="colist arabic"><ol>
<li>
<p>
Definition des zu summierenden Vektors
</p>
</li>
<li>
<p>
Definition des zur Addition neutralen Elementes
</p>
</li>
<li>
<p>
Schleife über die Elemente des Vektors
</p>
</li>
<li>
<p>
Addition des aktuellen Vektorelementes zum Ergebnis
</p>
</li>
<li>
<p>
Ausgabe des Ergebnisses
</p>
</li>
</ol></div>
</div>
<div class="sect3">
<h4 id="_8230_zur_funktion">2.1.2. &#8230; zur Funktion</h4>
<div class="paragraph"><p>Für meine Summenfunktion will die Definition des zu summierenden Vektors
der Anwenderin überlassen (alles andere wäre auch sehr seltsam, wer braucht eine Funktion,
                            die immer die Summe von 19 berechnet?),
daher wird der Vektor zu einem Argument der Funktion.
Ich wähle als Namen für das Argument jetzt <code>x</code> (das könnte aber
auch <code>a</code> bleiben, das ist eine Frage der Konvention, und unter <code>x</code> verstehen wir
meist eine Unbekannte). Und als Ausgabe verwende ich keine Druck- sondern eine
Rückgabefunktion (<code>return()</code> statt <code>print()</code>).
Das Ergebnis sieht dann so aus:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>my_sum &lt;- function(x) {
    value &lt;- 0
    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> (x_i in x) {
        value &lt;- value + x_i
    }
    return(value)
}</tt></pre></div></div>
<div class="paragraph"><p>Dabei habe ich mehrere Dinge getan, beispielsweise einen ziemlich miesen Namen für meine Funktion gewählt.
Im Wesentlichen aber habe ich:</p></div>
<div class="ulist"><ul>
<li>
<p>
entschieden, welchen Code die Funktion <a href="#_scoping">enthält</a>,
</p>
</li>
<li>
<p>
welche Zuweisung zu einem <a href="#_argumente">Funktionsargument</a> wird und
</p>
</li>
<li>
<p>
was die Funktion <a href="#_return_value_und_side_effects">zurückgibt</a>.
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect2">
<h3 id="_scoping">2.2. Scoping</h3>
<div class="paragraph"><p>Programmiersprachen kennen für Objekte unterschiedliche Gültigkeitsbereiche
(englisch "scope"), wir sehen uns das am Beispiel an:</p></div>
<div class="sect3">
<h4 id="_schreibzugriffe">2.2.1. Schreibzugriffe</h4>
<div class="paragraph"><div class="title">Ausgangszustand</div><p>Im Augenblick hat das Objekte <code>value</code> den Wert 19:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>print(value)</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## [1] 19</code></pre>
</div></div>
<div class="paragraph"><div class="title">Funktionsausführung</div><p>Jetzt wenden wir unsere Summenfunktion an und berechnen die Summe eines anderen Vektors:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>print(my_sum(1:3))</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## [1] 6</code></pre>
</div></div>
<div class="paragraph"><p>Das Objekt <code>value</code> behält seinen Wert:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>print(value)</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## [1] 19</code></pre>
</div></div>
<div class="paragraph"><p>Und das, obwohl wir innerhalb der Funktion dem Objekt <code>value</code> in der ersten
Zeile den Wert 0 zuweisen und diesen dann in der Schleife mit den Werten 1, 3
und 6 überschreiben:
<strong>R</strong> verwaltet automatisch die Gültigkeitsbereiche aller Objekte.
Es gibt daher ein Objekt names  <code>value</code> außerhalb der Funktion, das den Wert 19 enthält und unverändert bleibt.
Innerhalb der Funktion legt <strong>R</strong> ein neues lokales Objekt, ebenfalls mit dem Namen
<code>value</code>, an.
Du <em>kannst</em> auch aus einer Funktion in einen <a href="#_arbeiten_mit_gültigkeitsbereichen">anderen Gültigkeitsbereich</a> schreiben, wenn Du das wirklich willst.</p></div>
</div>
<div class="sect3">
<h4 id="_lesezugriffe">2.2.2. Lesezugriffe</h4>
<div class="paragraph"><div class="title">Lesen ist unsicher</div><p>Mit dem Namen eines Objektes wird dieses gelesen. Innerhalb einer Funktion sucht
<strong>R</strong> zunächst nach einem lokalen Objekt des gesuchten Namens, dann in den der
Funktion übergeordneten Gültigkeitsbereichen, also außerhalb der Funktion.</p></div>
<div class="paragraph"><p>Das kann zu unerwünschten Nebeneffekten führen. Stell Dir vor, Du kommentierst
beim Schreiben der Summenfunktion die Definition des zur Addition neutralen
Elementes aus Versehen aus:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>my_sum_broken &lt;- function(x) {
    <span style="font-style: italic"><span style="color: #9A1900"># FIXME: this is accidentally commented out:</span></span>
    <span style="font-style: italic"><span style="color: #9A1900"># value &lt;- 0</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> (x_i in x) {
        value &lt;- value + x_i
    }
    return(value)
}</tt></pre></div></div>
<div class="paragraph"><p>Du führst die Funktion aus und erhältst:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>print(my_sum_broken(1:3))</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## [1] 25</code></pre>
</div></div>
<div class="paragraph"><p>Was ist passiert?
Im ersten Durchlauf der Schleife gibt es beim Lesen von
<code>value</code> noch kein lokales Objekt dieses Namens. Daher sucht <strong>R</strong> außerhalb der
Funktion und findet ein Objekt mit dem Wert 19.
Zu diesem Objekt addieren
wir <code>x_i</code>, das im ersten Schleifendurchlauf den Wert <code>1</code> enthält und erschaffen
damit in der Funktion ein lokales Objekt names <code>value</code>, das dann im zweiten
Durchlauf der Schleife auch gelesen werden kann.</p></div>
<div class="paragraph"><p>Wenn Du diese Funktion verwendest, ohne vorher das Objekt <code>value</code> zu definieren,
oder das Objekt <code>value</code> entfernst und dann die Funktion ausführst</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>rm(value)
print(my_sum_broken(1:3))</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Error: object 'value' not found</span></span>
</tt></pre></div></div>
<div class="paragraph"><p>erhälst Du einen Fehler, weil <strong>R</strong> auch außerhalb der Funktion kein Objekt
names <code>value</code> finden kann. Und diesen Fehler erwarten wir ja eigentlich, wenn
wir nur die Funktion betrachten: sie ist fehlerhaft.</p></div>
<div class="paragraph"><div class="title">Sicherer Lesen</div><p>Wie wir eine Funktion dazu bringen können, außerhalb ihres Gültigkeitsbereiches
zu schreiben (nein, das <em>wie</em> habe ich Dir noch nicht gezeigt), so können wir
eine Funktion auch zwingen, beim Lesen nur nach lokalen Objekten zu
suchen:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>my_sum_safer &lt;- function(x) {
    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> (x_i in x) {
        value &lt;- get(<span style="color: #FF0000">"value"</span>, inherits = FALSE) + x_i
    }
    return(value)
}</tt></pre></div></div>
<div class="paragraph"><p>Selbst wenn wir ein Objekt namens <code>value</code> anlegen, gibt die Funktion nun einen
Fehler aus:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>value &lt;- 42
my_sum_safer(1:10)</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Error in get("value", inherits = FALSE): object 'value' not found</span></span>
</tt></pre></div></div>
<div class="paragraph"><p>Ich finde es aber praktikabler, beim Schreiben einer Funktion darauf zu achten,
welche Objekte ich lese.<br />
Und wenn Du Funktionen <a href="#_funktionen_testen">testest</a>, findest Du Fehler, die auf Scoping beruhen,
sehr schnell.</p></div>
</div>
<div class="sect3">
<h4 id="_arbeiten_mit_gültigkeitsbereichen">2.2.3. Arbeiten mit Gültigkeitsbereichen</h4>
<div class="paragraph"><p>Ein Befehl, mit dem Du alle Objekte Deines aktuellen Arbeitsbereiches löschen
kannst (entsprechend dem RStudio-Knopf mit dem Besensymbol <span class="footnote"><br />[Im <a href="https://github.com/rstudio/rstudio/releases/tag/v1.1.426">Code von RStudio v1.1.426</a> findet sich die Funktion hinter dem Knopf  in der Datei src/cpp/session/modules/SessionEnvironment.R, sie besteht im wesentlichen aus der Zeile<br />
rm(list=ls(envir=env, all.names=includeHidden), envir=env)<br />
Sie wird in src/cpp/session/modules/environment/SessionEnvironment.cpp in der C++-Funktion  removeAllObjects aufgerufen.
]<br /></span>), lautet:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>rm(list = ls(all.names = TRUE))</tt></pre></div></div>
<div class="paragraph"><p>Nun  bin ich
vergesslich, weshalb ich mir die Syntax schlecht merken kann und lieber eine
Funktion (aber keinen Knopf) hätte.
Da "der aktuelle Arbeitsbereich" ein Gültigkeitsbereich
(in <strong>R</strong> heißen die Gültigkeitsbereiche "environments", in <strong>S</strong> hießen sie "frames") ist und die
Funktionen  <code>ls</code> und <code>rm</code> nur in <em>einem</em> Gültigkeitsbereich arbeiten, funktioniert das naheliegende</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>wipe_clean &lt;- function() {
    rm(list = ls(all.names = TRUE))
}</tt></pre></div></div>
<div class="paragraph"><p><strong>nicht</strong>.</p></div>
<div class="paragraph"><p>Wenn ich den Gültigkeitsbereich explizit</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>wipe_clean &lt;- function() {
    rm(list = ls(name = parent.frame(), all.names = TRUE), envir = parent.frame())
}</tt></pre></div></div>
<div class="paragraph"><p>angebe, tut die Funktion, was ich wollte:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ls()</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## [1] "a"             "a_i"           "my_sum"        "my_sum_broken"
## [5] "my_sum_safer"  "value"         "wipe_clean"</code></pre>
</div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>wipe_clean()
ls()</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## character(0)</code></pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_argumente">2.3. Argumente</h3>
<div class="paragraph"><p>Funktionen kennen Argumente, am besten nicht zu viele (siehe zum Beispiel <a href="#cc">[cc]</a>).
Unsere Summenfunktion kennt beispielsweise eines, nämlich den Vektor, den sie summieren soll. Der ist also ein obligatorisches Element, er sollte keine Voreinstellung haben (und hat auch keine).</p></div>
<div class="paragraph"><p>Eine Funktion, die, wie <code>wipe_clean</code>, kein Argument kennt, ist Folgende:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>memory_hogs &lt;- function() {
    z &lt;- sapply(ls(envir = parent.frame()),
                function(x) object.size(get(x, envir = parent.frame())))
    return(z)
}</tt></pre></div></div>
<div class="paragraph"><p>Diese Funktion gibt mir für jedes Objekt des Gültigkeitsbereiches, in dem ich sie aufrufe, den Speicherverbrauch aus.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>va &lt;- rep(mtcars, 1)
vb &lt;- rep(mtcars, 1000)
vc &lt;- rep(mtcars, 2000)
vd &lt;- rep(mtcars, 100)
memory_hogs()</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## memory_hogs          va          vb          vc          vd
##        7576        4232     3432720     6864720      343920</code></pre>
</div></div>
<div class="paragraph"><p>Bei so wenigen Objekten erkenne ich leicht, dass <code>vc</code> der größte Speicherfresser ist und ich, falls mir der Speicher platzt und ich <code>vc</code> nicht mehr unbedingt brauche, <code>vc</code> löschen sollte.</p></div>
<div class="paragraph"><p>Aber wenn ich viele Objekte habe, wäre es doch schön, ein optionales Funktionsargument zu haben, das in seiner Voreinstellung die Ausgabe nach Größe des Speicherbedarfs sortiert:</p></div>
<div class="listingblock">
<div class="title">Ein Steuerargument</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>memory_hogs &lt;- function(order = TRUE) {
    z &lt;- sapply(ls(envir = parent.frame()),
                function(x) object.size(get(x, envir = parent.frame())))
    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> (isTRUE(order)) z &lt;- z[order(z)]
    return(z)
}</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>memory_hogs()</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>##          va memory_hogs          vd          vb          vc
##        4232        9744      343920     3432720     6864720</code></pre>
</div></div>
<div class="paragraph"><p>Das ist ein klassisches (optionales) Steuerargument, das das Verhalten einer Funktion steuert.
Steuerargumente sollten eine sinnvolle Voreinstellung haben.</p></div>
<div class="paragraph"><p>Da die <code>memory_hogs</code> intern nun die Funktion <code>order</code> aufruft, könnten wir ja auf die Idee kommen, dieser Funktion Argumente weiterreichen zu wollen.
Das können wir entweder explizit tun, oder wir benutzen ein spezielles, <em>Ellipsis</em> genanntes Argument, das durch drei Punkte (<code>...</code>) aufgerufen wird:</p></div>
<div class="listingblock">
<div class="title">Ellipsis I</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>memory_hogs &lt;- function(...) {
    z &lt;- sapply(ls(envir = parent.frame()),
                function(x) object.size(get(x, envir = parent.frame())))
    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> (! missing(...)) {
      z &lt;- z[order(z, ...)]
    }
    return(z)
}</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>memory_hogs()</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## memory_hogs          va          vb          vc          vd
##       13080        4232     3432720     6864720      343920</code></pre>
</div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>memory_hogs(decreasing = TRUE)</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>##          vc          vb          vd memory_hogs          va
##     6864720     3432720      343920       13080        4232</code></pre>
</div></div>
<div class="paragraph"><p>Jetzt können wir die Rückgabe unserer Funktion nutzen, um die beiden größten Speicherfresser zu löschen:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>rm(list = names(memory_hogs(decreasing = TRUE)[1:2]))
memory_hogs()</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## memory_hogs          va          vd
##       13080        4232      343920</code></pre>
</div></div>
<div class="paragraph"><p>Wir können also, wenn wir wollen, drei Arten von Argumenten unterscheiden:</p></div>
<div class="ulist"><ul>
<li>
<p>
Obligatorische. Sie kennen keine Voreinstellungen und übergeben üblicherweise Objekte, die von der Funktion verarbeitet werden sollen. Der zu summierende Vektor <code>x</code> in <code>my_sum</code> ist ein klassisches Beispiel: ein Voreinstellung für die zu summiernden Zahlen (etwa <code>x = c(40, 2)</code>) ist unsinnig.
</p>
</li>
<li>
<p>
Optionale. Sie haben Voreinstellungen und dienen üblicherweise der Steuerung der Funktion. Das Argument <code>order</code> in <code>memory_hogs</code> ist ein klassisches Beispiel: in der Voreinstellung wird die Ausgabe nach Speicherverbrauch sortiert.
</p>
</li>
<li>
<p>
Die <em>Ellipsis</em>, um Argumente an andere Funktionen weiterzureichen.
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_return_value_und_side_effects">2.4. Return Value und Side Effects</h3>
<div class="paragraph"><p>Jede Funktion in <strong>R</strong> gibt einen Wert zurück, falls sie nicht mit einem Fehler abbricht.
Wenn wir keinen Rückgabewert (return value) explizit angeben, ist er automatisch der Wert des letzten in der Funktion ausgewerteten Ausdrucks (siehe <code>?expression</code>), oder, falls die Funktion keinen Ausdruck hat, <code>NULL</code> (siehe <code>?return</code>), compris?
Es ist daher sicher nicht schlecht, wenn Du versucht, den Rückgabewert jeder Funktion explizit anzugeben.
Wenn Du die auf die explizite Rückgabe verzichtest ist Deine Funktion zwar (um eine Zeile) kürzer und inhaltsgleich, aber weniger sprechend. Und damit weniger gut lesbar.
Und damit mehr schlechter als eine Zeile kürzer mehr besser ist, capisce?</p></div>
<div class="paragraph"><p>Komplexere Funktionen haben oft Nebenwirkungen (<a href="https://en.wikipedia.org/wiki/Side_effect_(computer_science)">side effects</a>).
Bei vielen dieser Funktionen sind die Nebenwirkungen der eigentliche Zweck der Funktion,
manchmal ist der Rückgabewert sogar belanglos.
Die Funktion <code>rm</code> gibt beispielsweise unsichtbar <code>NULL</code> zurück (und das selbst dann, wenn es gar nichts zu löschen gibt).
Das erkennen wir, wenn wir ihren Rückgabewert explizit drucken:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>a &lt;- <span style="color: #FF0000">"This is a string"</span>
print(rm(a))</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## NULL</code></pre>
</div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>print(rm())</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## NULL</code></pre>
</div></div>
<div class="paragraph"><p>Das heißt also, dass unsere Funktion <code>wipe_clean</code> den Wert <code>invisible(NULL)</code>, zurückgibt, denn das war der Wert des letzten in ihr ausgewerteten Ausdrucks (der Aufruf der Funktion <code>rm</code>).</p></div>
<div class="paragraph"><p>Das können wir ändern, indem wir einen expliziten Rückgabewert einbauen (bei der Gelegenheit wandeln wir gleich noch den Gültigkeitsbereich, indem die Funktion löscht, in ein Steuerargument mit Voreinstellung um):</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>wipe_clean &lt;- function(environment = parent.frame()) {
    objects &lt;- ls(name = environment, all.names = TRUE)
    rm(list = objects, envir = environment)
    return(invisible(objects))
}</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>print(wipe_clean())</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## [1] "memory_hogs" "va"          "vd"          "wipe_clean"</code></pre>
</div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ls()</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## character(0)</code></pre>
</div></div>
<div class="paragraph"><p>Jetzt gibt die Funktion die Namen der von ihr gelöschten Objekte zurück. Wir wissen also, wie hieß, was wir gelöscht haben. Damit können wir zwar nichts mehr anfangen, aber die Funktion hat nun genau einen expliziten Endpunkt. Das ist immerhin schön übersichtlich.</p></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Exkurs: Komplexe Rückgabewerte</div>
<div class="literalblock">
<div class="content">
<pre><code>Rückgabewerte können auch komplex sein. Stell Dir vor, Du wolltest für einen Vektor verschiedene statistische Kennwerte berechen. Eine Funktion könnte so aussehen:</code></pre>
</div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>stats &lt;- function(x) {
    m &lt;- mean(x)
    v &lt;- var(x)
    r &lt;- range(x)
    value &lt;- list(date = Sys.time(), data = x, mean = m, variance = v, range = r)
    return(value)
}
stats(rnorm(100))</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## $date
## [1] "2018-07-20 08:39:20 CEST"
##
## $data
##   [1]  0.860801724 -0.158578241 -0.234944225 -0.505843111  0.034522366
##   [6] -0.496977540  0.508002225  0.293323769  0.075517693  0.829114787
##  [11] -1.869618099 -1.150959780  0.021130944 -1.048840209  1.526022360
##  [16] -0.099791910 -0.336854089 -1.274676099 -0.124447217  0.688437646
##  [21] -0.648727453 -0.566246177  1.802814329  0.743268925  0.353116659
##  [26]  0.009704345 -0.288916966  0.794458914 -1.037864542  0.295658165
##  [31] -1.226477384 -0.759348546  0.028837827  0.255676581 -2.315335739
##  [36]  0.005546007  0.686264320 -0.024355949  0.369017236 -0.844468279
##  [41]  0.245312132  0.708641319  0.308274824  2.530538809 -0.869043994
##  [46] -0.766923078 -0.290272999 -0.201345540  1.612671359  0.664956792
##  [51]  0.262960362 -0.078255842  1.472339830 -0.665755836 -1.198311720
##  [56]  0.771200585 -0.724206683  1.651185523 -0.081079239  0.921657245
##  [61] -0.557152601 -0.379254270 -0.464628092  0.514070634  0.400817785
##  [66] -0.526570878 -0.312561293  1.162108623  0.095760475 -0.468159001
##  [71] -0.960185058 -1.629942991  0.977856507  1.028411389 -0.657755541
##  [76] -0.079646464 -1.538108224  0.674887145  0.553470768  0.224705419
##  [81]  0.629025310  1.258344420  0.455049780 -0.400913946 -0.408216808
##  [86] -0.573603209 -0.226973476  1.102914853  0.280282710 -0.793470547
##  [91] -0.354484286 -0.128207775 -0.240606914  0.279807915 -0.016504902
##  [96]  0.153225853  1.400550341 -0.080245838 -0.759557189 -2.003606058
##
## $mean
## [1] -0.009265563
##
## $variance
## [1] 0.7328524
##
## $range
## [1] -2.315336  2.530539</code></pre>
</div></div>
<div class="paragraph"><p>Die Rückgabe einer Liste ist unter statistischen Funktionen (<code>stats::lm</code>, <code>stats::glm</code>, <code>mgcv::gam</code>, &#8230;)
verbreitet.</p></div>
</div></div>
</div>
<div class="sect2">
<h3 id="_funktionen_verwalten">2.5. Funktionen verwalten</h3>
<div class="sect3">
<h4 id="_im_jeweiligen_skript">2.5.1. Im jeweiligen Skript</h4>
<div class="paragraph"><p>Ich schreibe viele Funktionen während Datenauswertungen, sie landen dann erstmal
im jeweiligen Auswertungsskript. Manchmal sammele ich sie an dessen Beginn, meist lege ich
sie aber gleich <a href="#_lokal">lokal</a> ab.</p></div>
</div>
<div class="sect3">
<h4 id="_lokal">2.5.2. Lokal</h4>
<div class="paragraph"><p>Viele meiner wissenschaftlichen Projekte haben im <strong>R</strong>-Skript-Verzeichnis ein Unterverzeichnis mit dem Namen <code>./functions</code>.
Darin lege ich die Funktionen, die ich <a href="#_im_jeweiligen_skript">in den Skripten des Projektes</a> schreibe, ab.
Wichtige Funktionen kommen in eigene Dateien, die nach ihnen benannt sind, andere sammele ich, beispielsweise in
<code>./functions/utils.R</code> oder <code>./functions/misc.R</code>.</p></div>
<div class="paragraph"><p>Jedes Auswertungsskript hat dann am Beginn die Zeilen</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">for</span></span> (f in dir(<span style="color: #FF0000">"./functions/"</span>, full.names = TRUE, pattern = <span style="color: #FF0000">".*</span><span style="color: #CC33CC">\\</span><span style="color: #FF0000">.[rR]$"</span>)) {
    source(f)
}</tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="_global">2.5.3. Global</h4>
<div class="paragraph"><p>Funktionen, die Du nicht nur in einem Projekt nutzen willst,
kannst Du zentral verwalten,
in dem Du Dateien wie im Abschnitt <a href="#_lokal">lokal</a> beschrieben ablegst,
nur mit dem Unterschied, dass Du ein zentrales Verzeichnis benutzt.
Dann fügst Du in eine Deiner <strong>R</strong>-Startup-Dateien die Anweisung</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">for</span></span> (f in dir(<span style="color: #FF0000">"/full/path/to/functions_directory/"</span>,
              full.names = TRUE, pattern = <span style="color: #FF0000">".*</span><span style="color: #CC33CC">\\</span><span style="color: #FF0000">.[rR]$"</span>)) {
    source(f)
}</tt></pre></div></div>
<div class="paragraph"><p>ein und den  passt "/full/path/to/functions_directory/" an.
Geeignte <strong>R</strong>-Startup-Dateien verrät Dir die <strong>R</strong>-Hilfe <code>?Startup</code> oder der Code:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>candidates &lt;- c( Sys.getenv(<span style="color: #FF0000">"R_PROFILE"</span>),
                 Sys.getenv(<span style="color: #FF0000">"R_PROFILE_USER"</span>),
                 file.path(Sys.getenv(<span style="color: #FF0000">"R_HOME"</span>), <span style="color: #FF0000">"etc"</span>, <span style="color: #FF0000">"Rprofile.site"</span>),
                 file.path(Sys.getenv(<span style="color: #FF0000">"HOME"</span>), <span style="color: #FF0000">".Rprofile"</span>),
                 file.path(getwd(), <span style="color: #FF0000">".Rprofile"</span>) )

Filter(file.exists, candidates)</tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="_als_paket">2.5.4. Als Paket</h4>
<div class="paragraph"><p>Wenn Du Dir die Mühe machst, Deine Funktionen zu <a href="#_funktionen_dokumentieren">dokumentieren</a>, kannst
Du sie eigentlich auch gleich in einem oder mehreren Paketen verwalten.
Das ist am elegantesten.</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_schöner_programmieren">3. Schöner Programmieren</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_argumententests">3.1. Argumententests</h3>
<div class="paragraph"><p>Wir haben verschiedene Möglichkeiten, die Objekte, die wir den Argumenten einer Funktion übergeben, zu testen.</p></div>
<div class="sect3">
<h4 id="_typentests">3.1.1. Typentests</h4>
<div class="paragraph"><p>Wir können Objekte darauf testen, ob sie einem bestimmten Typ (einer Klasse) angehören;
bei Objekten, die einer Funktion als Argument übergeben werden ist dies besonders ratsam.
Das geht in reinen <code>base R</code>, ist aber eher umständlich,
die <a href="https://cran.r-project.org/web/packages/checkmate/vignettes/checkmate.html#intro">Vignette zu <code>checkmate</code></a>
bietet ein anschauliches Bespiel.</p></div>
<div class="paragraph"><p>Ich kenne zwei Pakete, die Typentest vereinfachen:
<a href="https://CRAN.R-project.org/package=assertthat">assertthat</a> und
<a href="https://CRAN.R-project.org/package=checkmate">checkmate</a></p></div>
<div class="ulist"><ul>
<li>
<p>
<a href="https://CRAN.R-project.org/package=checkmate">checkmate</a> ist hauptsächlich in C geschrieben, sehr schnell,
sehr flexibel mit unterschiedlichen Testarten ("checks", "asserts" und "tests"),
hat aber viele Abhängigkeiten und ist etwas sperrig: sein Manual ist über 100 Seiten lang.
</p>
</li>
<li>
<p>
<a href="https://CRAN.R-project.org/package=assertthat">assertthat</a> ist reines R ohne irgendwelche Abhängigkeiten und recht übersichtlich.
</p>
</li>
</ul></div>
<div class="paragraph"><p><a href="https://CRAN.R-project.org/package=assertthat">assertthat</a> ist sehr einfach:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>x &lt;- 6
assertthat::assert_that(is.numeric(x))</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## [1] TRUE</code></pre>
</div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>x &lt;- <span style="color: #FF0000">"This is a string."</span>
assertthat::assert_that(is.numeric(x))</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Error: x is not a numeric or integer vector</span></span>
</tt></pre></div></div>
<div class="paragraph"><div class="title">Was haben wir davon?</div><p>Wenn wir unserer Summenfunktion</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>my_sum &lt;- function(x) {
    value &lt;- 0
    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> (x_i in x) {
        value &lt;- value + x_i
    }
    return(value)
}</tt></pre></div></div>
<div class="paragraph"><p>ein nicht-numerisches Argument übergeben, erhalten wir eine recht kryptische Fehlermeldung:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>my_sum(c(<span style="color: #FF0000">"a"</span>, <span style="color: #FF0000">"b"</span>))</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Error in value + x_i: non-numeric argument to binary operator</span></span>
</tt></pre></div></div>
<div class="paragraph"><p>Durch den Einbau eines Typentests</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>my_sum &lt;- function(x) {
    assertthat::assert_that(is.numeric(x))
    value &lt;- 0
    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> (x_i in x) {
        value &lt;- value + x_i
    }
    return(value)
}</tt></pre></div></div>
<div class="paragraph"><p>wird die Meldung deutlich verständlicher:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>my_sum(c(<span style="color: #FF0000">"a"</span>, <span style="color: #FF0000">"b"</span>))</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Error: x is not a numeric or integer vector</span></span>
</tt></pre></div></div>
<div class="paragraph"><p>Mit <a href="https://CRAN.R-project.org/package=checkmate">checkmate</a> können wir sogar erzwingen, dass x nicht nur numerisch sein muss,
sondern auch mindestens zwei Elemente haben soll. Eine Summe einer Zahl ist ja etwas albern:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>my_sum &lt;- function(x) {
    checkmate::qassert(x, <span style="color: #FF0000">"n&gt;=2"</span>)
    value &lt;- 0
    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> (x_i in x) {
        value &lt;- value + x_i
    }
    return(value)
}</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>my_sum(42)</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Error in rasciidoc::render_slides("index.Rasciidoc", clean = TRUE): Assertion on 'x' failed. Must be of length &gt;= 2, but has length 1.</span></span>
</tt></pre></div></div>
<div class="paragraph"><p><em>Ich nutze Typentests oft in Funktionen. Da <a href="https://CRAN.R-project.org/package=checkmate">checkmate</a> deutlich mehr Funktionalität bietet, nutzte ich <a href="https://CRAN.R-project.org/package=assertthat">assertthat</a> eher selten.</em></p></div>
</div>
<div class="sect3">
<h4 id="_auswahllisten">3.1.2. Auswahllisten</h4>
<div class="paragraph"><p>Mit Auswahllisten können wir Objekte darauf testen, ob sie eine von mehreren Möglichkeiten
enthalten. Das ist vor allem für Steuerargumente hilfreich.
<code>base R</code> kennt <code>match.arg</code>, das mit alphanumerischen Vektoren arbeitet und einfach das Objekt zurückgibt, wenn
es in der Auswahlliste enthalten ist:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>noten &lt;-  c(<span style="color: #FF0000">"sehr gut"</span>, <span style="color: #FF0000">"gut"</span>, <span style="color: #FF0000">"nicht soo gut"</span>, <span style="color: #FF0000">"das kann auf jeden Fall noch besser werden"</span>)
note  &lt;- <span style="color: #FF0000">"gut"</span>
match.arg(arg = note, choices = noten)</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## [1] "gut"</code></pre>
</div></div>
<div class="paragraph"><p>Dabei bedient es sich dem "partial matching", das heißt, dass ein eindeutig einer Auswahlmöglichkeit zuzuordnender Anfang einer Zeichenkette ausreicht:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>note  &lt;- <span style="color: #FF0000">"das"</span>
match.arg(arg = note, choices = noten)</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## [1] "das kann auf jeden Fall noch besser werden"</code></pre>
</div></div>
<div class="paragraph"><p>Wird kein Treffer in der Auswahlliste gefunden, erhalten wir einen Fehler:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>note  &lt;- <span style="color: #FF0000">"ausreichend"</span>
match.arg(arg = note, choices = noten)</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Error in match.arg(arg = note, choices = noten): 'arg' should be one of "sehr gut", "gut", "nicht soo gut", "das kann auf jeden Fall noch besser werden"</span></span>
</tt></pre></div></div>
<div class="paragraph"><p><code>match.arg</code> ist genau, was hinter Steuerargumenten vieler Funktionen (z.b.  <code>mgcv::gam(optimizer = &#8230;)</code>) steckt, hier ein Beispiel aus der Hilfe zu <code>match.arg</code>:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>center &lt;- function(x, type = c(<span style="color: #FF0000">"mean"</span>, <span style="color: #FF0000">"median"</span>, <span style="color: #FF0000">"trimmed"</span>)) {
    type &lt;- match.arg(type)
    switch(type,
           mean = mean(x),
           median = median(x),
           trimmed = mean(x, trim = .1))
}
center(rnorm(100), <span style="color: #FF0000">"med"</span>)</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## [1] -0.1118112</code></pre>
</div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>center(rnorm(100), <span style="color: #FF0000">"m"</span>)</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Error in match.arg(type): 'arg' should be one of "mean", "median", "trimmed"</span></span>
</tt></pre></div></div>
<div class="paragraph"><p><a href="https://CRAN.R-project.org/package=checkmate">checkmate</a> kennt auch Auswahllisten, macht aber kein <code>partial matching</code> (was ich ganz gut finde):</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>note  &lt;- <span style="color: #FF0000">"das"</span>
checkmate::assertChoice(x = note, choices = noten)</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Error in rasciidoc::render_slides("index.Rasciidoc", clean = TRUE): Assertion on 'note' failed: Must be element of set {'sehr gut','gut','nicht soo gut','das kann auf jeden Fall noch besser werden'}, but is 'das'.</span></span>
</tt></pre></div></div>
<div class="paragraph"><p>Außerdem gibt <a href="https://CRAN.R-project.org/package=checkmate">checkmate</a> die gefundene Rückgabe unsichtbar zurück, weshalb ich hier ein explizites <code>print</code> benötige:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>note  &lt;- <span style="color: #FF0000">"gut"</span>
checkmate::assertChoice(x = note, choices = noten)
print(checkmate::assertChoice(x = note, choices = noten))</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## [1] "gut"</code></pre>
</div></div>
<div class="paragraph"><p><a href="https://CRAN.R-project.org/package=checkmate">checkmate</a> kann nicht nur mit alphanumerischen Vektoren umgehen:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>x &lt;- 3
choices &lt;- 1:7
print(checkmate::assertChoice(x = x, choices = choices))</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## [1] 3</code></pre>
</div></div>
<div class="paragraph"><p><em>Ich nutze Auswahllisten eher selten, da ich selten Steuerargumente mit mehreren Auswahlmöglichenkeiten in meinen Funktionen habe.</em></p></div>
</div>
</div>
<div class="sect2">
<h3 id="_funktionen_testen">3.2. Funktionen testen</h3>
<div class="sect3">
<h4 id="_unit_testing">3.2.1. Unit Testing</h4>
<div class="paragraph"><p>Beim <a href="https://en.wikipedia.org/wiki/Unit_testing">Unit Testing</a> wollen wir nicht die einer Funktion übergebenen Argumente, sondern die Funktion selbst testen.
Also im Zweifel ihren Rückgabewert.</p></div>
<div class="paragraph"><p>Ich kenne zwei Pakete, die Unit Testing in R formalisieren
(im Prinzip geht es auch ohne spezielle Pakete,
 aber seit ich die beiden Pakete kenne,
 habe ich nie mehr wie früher "von Hand" getestet):</p></div>
<div class="ulist"><ul>
<li>
<p>
<a href="https://CRAN.R-project.org/package=RUnit">RUnit</a> gibt es schon seit 2004, es ist sehr formal
 und hat wenige Abhängigkeiten (daher bevorzuge ich es beim Testen von Paketen).
</p>
</li>
<li>
<p>
<a href="https://CRAN.R-project.org/package=testthat">testthat</a> finde ich interaktiv einfacher anzuwenden.
</p>
</li>
</ul></div>
<div class="sect4">
<h5 id="_erwartungen">Erwartungen</h5>
<div class="paragraph"><p>Die kleinste Testeinheit ist immer ein Vergleich.</p></div>
<div class="paragraph"><p>Wenn wir die Funktionen</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>my_sum &lt;- function(x) {
    value &lt;- 0
    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> (x_i in x) {
        value &lt;- value + x_i
    }
    return(value)
}</tt></pre></div></div>
<div class="literalblock">
<div class="content">
<pre><code>und</code></pre>
</div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>not_my_sum &lt;- function(x) {
    value &lt;- 0
    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> (x_i in x) {
        value &lt;- value - x_i
    }
    return(value)
}</tt></pre></div></div>
<div class="paragraph"><p>haben, können wir zum Beispiel mit <code>base R</code> prüfen, ob sie tun, was wir erwarten:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>my_sum(c(2, 7)) == 9</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## [1] TRUE</code></pre>
</div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># better use identical(), see ?Comparison</span></span>
identical(not_my_sum(c(2, 7)), 9)</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## [1] FALSE</code></pre>
</div></div>
<div class="paragraph"><p>Beide Pakete formalisieren dies zu Erwartungsfunktionen die hauptsächlich dazu dienen,
Fehler zu beschreiben:</p></div>
<div class="listingblock">
<div class="title"><a href="https://CRAN.R-project.org/package=RUnit">RUnit</a></div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>RUnit::checkIdentical(not_my_sum(c(2, 7)), 9)</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Error in RUnit::checkIdentical(not_my_sum(c(2, 7)), 9): FALSE</span></span>
<span style="font-style: italic"><span style="color: #9A1900">##</span></span>
</tt></pre></div></div>
<div class="listingblock">
<div class="title"><a href="https://CRAN.R-project.org/package=testthat">testthat</a></div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>testthat::expect_identical(not_my_sum(c(2, 7)), 9)</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## not_my_sum(c(2, 7)) not identical to 9.
## 1/1 mismatches
## [1] -9 - 9 == -18</code></pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_tests">Tests</h5>
<div class="paragraph"><p>Um Erwartungen bei der Paketentwicklung oder in Bezug auf ihre <a href="#_code_coverage">Coverage</a> auszuwerten,
    werden in beiden Paketen Erwartungen zu Tests zusammenfasst
(eigentlich sollten Tests immer nur Erwartungen zu einer Funktion enthalten, aber wir wollen ja auch Fehler sehen):</p></div>
<div class="paragraph"><div class="title"><a href="https://CRAN.R-project.org/package=testthat">testthat</a></div><p>Du kannst einen Test entweder einzeln laufen lassen</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>testthat::context(<span style="color: #FF0000">"My first test."</span>)
testthat::test_that(<span style="color: #FF0000">"Simple test on summation."</span>, {
                        testthat::expect_identical(not_my_sum(c(2, 7)), 9,
                                                   info = <span style="color: #FF0000">"Not my sum."</span>)
                        testthat::expect_identical(my_sum(c(2, 7)), 9,
                                                   info = <span style="color: #FF0000">"My sum."</span>)
})</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Error: Test failed: 'Simple test on summation.'</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## * not_my_sum(c(2, 7)) not identical to 9.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## 1/1 mismatches</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## [1] -9 - 9 == -18</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## Not my sum.</span></span>
</tt></pre></div></div>
<div class="paragraph"><p>oder den Test in einer  Testdatei</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>testthat::context(<span style="color: #FF0000">"My first test."</span>)
testthat::test_that(<span style="color: #FF0000">"Simple test on summation."</span>, {
                        testthat::expect_identical(not_my_sum(c(2, 7)), 9,
                                                   info = <span style="color: #FF0000">"Not my sum."</span>)
                        testthat::expect_identical(my_sum(c(2, 7)), 9,
                                                   info = <span style="color: #FF0000">"My sum."</span>)
})</tt></pre></div></div>
<div class="paragraph"><p>mit einer Funktion auswerten, bei <a href="https://CRAN.R-project.org/package=testthat">testthat</a> ändert sich
relativ wenig:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>testthat::test_file(file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"test_my_sum.R"</span>))</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## ✔ | OK F W S | Context
##
⠏ |  0       | My first test.
⠋ |  0 1     | My first test.
⠙ |  1 1     | My first test.
✖ |  1 1     | My first test.
## ───────────────────────────────────────────────────────────────────────────
## test_my_sum.R:3: failure: Simple test on summation.
## not_my_sum(c(2, 7)) not identical to 9.
## 1/1 mismatches
## [1] -9 - 9 == -18
## Not my sum.
## ───────────────────────────────────────────────────────────────────────────
##
## ══ Results ════════════════════════════════════════════════════════════════
## OK:       1
## Failed:   1
## Warnings: 0
## Skipped:  0</code></pre>
</div></div>
<div class="paragraph"><p>Du erhälst aber die Information, dass der Fehler im ersten Test in Zeile 3 auftrat.</p></div>
<div class="paragraph"><div class="title"><a href="https://CRAN.R-project.org/package=RUnit">RUnit</a></div><p>Größer sind die Unterschiede bei <a href="https://CRAN.R-project.org/package=RUnit">RUnit</a>,
das primär für das Testen von Paketen entwickelt wurde:
Es ist beim einfachen</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>test_sum &lt;- function() {
    RUnit::checkIdentical(not_my_sum(c(2, 7)), 9)
    RUnit::checkIdentical(my_sum(c(2, 7)), 9)
}
test_sum()</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Error in RUnit::checkIdentical(not_my_sum(c(2, 7)), 9): FALSE</span></span>
<span style="font-style: italic"><span style="color: #9A1900">##</span></span>
</tt></pre></div></div>
<div class="paragraph"><p>recht spröde, mit einer Testdatei</p></div>
<div class="listingblock">
<div class="title">src/runit_my_sum.R</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>test_sum &lt;- function() {
    RUnit::checkIdentical(not_my_sum(c(2, 7)), 9)
    RUnit::checkIdentical(my_sum(c(2, 7)), 9)
}</tt></pre></div></div>
<div class="paragraph"><p>allerdings gesprächiger:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>test_file &lt;- normalizePath(file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"runit_my_sum.R"</span>))
runit &lt;- RUnit::runTestFile(test_file)</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>##
##
## Executing test function test_sum  ... Timing stopped at: 0 0 0
##  done successfully.</code></pre>
</div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>RUnit::printTextProtocol(runit)</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## RUNIT TEST PROTOCOL -- Fri Jul 20 08:39:21 2018
## ***********************************************
## Number of test functions: 1
## Number of errors: 0
## Number of failures: 1
##
##
## 1 Test Suite :
## runit_my_sum - 1 test function, 0 errors, 1 failure
## FAILURE in test_sum: Error in RUnit::checkIdentical(not_my_sum(c(2, 7)), 9) : FALSE
##
##
##
##
## Details
## ***************************
## Test Suite: runit_my_sum
## Test function regexp: ^test.+
## Test file regexp: ^runit_my_sum.R$
## Involved directory:
## /home/qwer/git/cyclops/fvafrcu/funktionen_in_r/src
## ---------------------------
## Test file: /home/qwer/git/cyclops/fvafrcu/funktionen_in_r/src/runit_my_sum.R
## test_sum: FAILURE !! (check number 1)
## Error in RUnit::checkIdentical(not_my_sum(c(2, 7)), 9) : FALSE
##</code></pre>
</div></div>
</div>
</div>
<div class="sect3">
<h4 id="_code_coverage">3.2.2. Code Coverage</h4>
<div class="paragraph"><p>Um zu sehen, ob Deine Unit Tests die Funktion gut testen,
kannst Du ihre  <a href="https://en.wikipedia.org/wiki/Code_coverage">Überdeckung</a> berechnen.
<a href="https://CRAN.R-project.org/package=covr">covr</a> ist eines der Pakete, die Code Coverage implentieren und das einzige, das ich nutze. Ich weiß es nicht, glaube aber, dass <a href="https://CRAN.R-project.org/package=covr">covr</a> die <a href="https://en.wikipedia.org/wiki/Code_coverage#Coverage_criteria"><em>branch coverage</em></a>
berechnet.</p></div>
<div class="paragraph"><p>Du kannst auch mit einer hohen Überdeckung unzureichend testen, wie wir
<a href="#_nebenwirkungen_testen">sp&auml;ter</a> sehen werden.
Versuche daher nicht, sie unbedingt zu maximieren und lasse Dich von einer hohen
Überdeckung einlullen. Aber prinzipiell ist eine hohe Überdeckung gut.</p></div>
<div class="paragraph"><p>Wenn Du eine Datei mit einer Funktionsdefinition</p></div>
<div class="listingblock">
<div class="title">src/my_sum_assertion.R</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>my_sum &lt;- function(x) {
    assertthat::assert_that(is.numeric(x))
    value &lt;- 0
    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> (x_i in x) {
        value &lt;- value + x_i
    }
    return(value)
}</tt></pre></div></div>
<div class="paragraph"><p>und eine mit dem Test</p></div>
<div class="listingblock">
<div class="title">src/test_my_sum_assertion.R</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>testthat::context(<span style="color: #FF0000">"Tests for summation with argument assertion."</span>)
testthat::test_that(<span style="color: #FF0000">"Testing summation"</span>, {
                    testthat::expect_identical(my_sum(c(2, 7)), 9)
                    testthat::expect_error(my_sum(c(<span style="color: #FF0000">"2"</span> + <span style="color: #FF0000">"7"</span>)))
})</tt></pre></div></div>
<div class="paragraph"><p>hast, kannst Du die Überdeckung berechnen.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cov &lt;- covr::file_coverage(file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"my_sum_assertion.R"</span>),
                           file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"test_my_sum_assertion.R"</span>))
print(cov)</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Coverage: 100.00%</span></span>
</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## src/my_sum_assertion.R: 100.00%</span></span>
</tt></pre></div></div>
<div class="paragraph"><p>Wenn Du eine Funktion schreibst, in der eine Zeile eingebaut ist, die der Test nicht
erreicht, weist Dich <a href="https://CRAN.R-project.org/package=covr">covr</a> darauf hin:</p></div>
<div class="listingblock">
<div class="title">src/my_sum_coverage.R</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>my_sum &lt;- function(x) {
    assertthat::assert_that(is.numeric(x))
    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> (! is.numeric(x)) message(<span style="color: #FF0000">"You'll never get here!"</span>)
    value &lt;- 0
    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> (x_i in x) {
        value &lt;- value + x_i
    }
    return(value)
}</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cov &lt;- covr::file_coverage(file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"my_sum_coverage.R"</span>),
                           file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"test_my_sum_assertion.R"</span>))
print(cov)</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Coverage: 83.33%</span></span>
</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## src/my_sum_coverage.R: 83.33%</span></span>
</tt></pre></div></div>
<div class="paragraph"><p><a href="https://CRAN.R-project.org/package=covr">covr</a> sagt Dir sogar, dass es die dritte Zeile ist:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>covr::zero_coverage(cov)</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>##                filename functions line value
## 2 src/my_sum_coverage.R    my_sum    3     0</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_nebenwirkungen_testen">3.2.3. Nebenwirkungen testen</h4>
<div class="paragraph"><p>Funktionen sind relativ einfach zu testen, wenn ihr Rückgabewert ihr Zweck ist.
Wenn sie aber Nebenwirkungen bezwecken, finde ich Tests schwieriger zu schreiben.</p></div>
<div class="paragraph"><p>Stell Dir vor, Du hättest die fehlerhafte Löschfunktion aus
<a href="#_arbeiten_mit_gültigkeitsbereichen">Arbeiten mit Gültigkeitsbereichen</a>
in eine Datei geschrieben:</p></div>
<div class="listingblock">
<div class="title">src/wipe_clean_broken.R</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>wipe_clean &lt;- function(environment = parent.frame()) {
    objects &lt;- ls(name = environment, all.names = TRUE)
    <span style="font-style: italic"><span style="color: #9A1900"># FIXME: rm() by default removes objects from</span></span>
    <span style="font-style: italic"><span style="color: #9A1900"># the current frame, which is this function, not the parent frame!</span></span>
    rm(list = objects)
    return(invisible(objects))
}</tt></pre></div></div>
<div class="paragraph"><p>Nun schreibst Du eine Testdatei:</p></div>
<div class="listingblock">
<div class="title">src/test_wipe_clean_broken.R</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>testthat::test_that(<span style="color: #FF0000">"Test return value."</span>, {
                    a &lt;- 3
                    testthat::expect_identical(wipe_clean(),
                                               c(<span style="color: #FF0000">"a"</span>))}
                    )</tt></pre></div></div>
<div class="paragraph"><p>Und erhälst vollständige Überdeckung:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cov &lt;- covr::file_coverage(file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"wipe_clean_broken.R"</span>),
                           file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"test_wipe_clean_broken.R"</span>))
print(cov)</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Coverage: 100.00%</span></span>
</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## src/wipe_clean_broken.R: 100.00%</span></span>
</tt></pre></div></div>
<div class="paragraph"><p>Alles gut? Nein, die Funktion ist kaputt und die Testdatei, die dies zeigt müsste
auf die Nebenwirkung testen:</p></div>
<div class="listingblock">
<div class="title">src/test_wipe_clean.R</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>testthat::test_that(<span style="color: #FF0000">"Test return value and side effects."</span>, {
                    a &lt;- 3
                    testthat::expect_identical(wipe_clean(), c(<span style="color: #FF0000">"a"</span>))
                    testthat::expect_identical(ls(), character(0))}
                    )</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>covr::file_coverage(file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"wipe_clean_broken.R"</span>),
                    file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"test_wipe_clean.R"</span>))</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Error: Test failed: 'Test return value and side effects.'</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## * ls() not identical to character(0).</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## Lengths differ: 1 is not 0</span></span>
</tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="_was_soll_die_ganze_testerei">3.2.4. Was soll die ganze Testerei?</h4>
<div class="paragraph"><p>Stell Dir vor, Du erstelltest öfter Abbildungen.
Jetzt bist Du ein Mensch mit einem Gefühl für Harmonien,
daher willst Du gerne, wenn möglich, den
<a href="https://de.wikipedia.org/wiki/Goldener_Schnitt">Goldenen Schnitt</a> bei der
Wahl der Zuschnitte berücksichtigen.</p></div>
<div class="paragraph"><p>Da Du Dir den Goldenen Schnitt nicht gut merken kannst, schreibst Du folgende Funktion:</p></div>
<div class="listingblock">
<div class="title">src/golden_ratio.R</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>golden_ratio  &lt;- function() {
    phi &lt;- (1 + sqrt(5)) / 2
    return(phi)
}</tt></pre></div></div>
<div class="paragraph"><p>Das ginge auch als Einzeiler:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>golden_ratio  &lt;- function() return((1 + sqrt(5)) / 2)</tt></pre></div></div>
<div class="paragraph"><p>aber den findest Du auch nicht viel eleganter, dafür aber schlechter lesbar.</p></div>
<div class="paragraph"><p>Du schreibst auch einen Test, obwohl der ziemlich trivial ist:</p></div>
<div class="listingblock">
<div class="title">src/test_golden_ratio.R</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>testthat::test_that(<span style="color: #FF0000">"Test on Golden Ratio"</span>, {
                        expectation &lt;- (1 + sqrt(5)) / 2
                        result &lt;- golden_ratio()
                        testthat::expect_identical(result, expectation)
})</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>covr::file_coverage(file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"golden_ratio.R"</span>),
                    file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"test_golden_ratio.R"</span>))</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Coverage: 100.00%</span></span>
</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## src/golden_ratio.R: 100.00%</span></span>
</tt></pre></div></div>
<div class="paragraph"><p>Wenn Du Graphiken nach dem Goldenen Schnitt proportionieren willst, musst Du bei
gegebener Länge der kurzen Seite diese mit dem Goldenen Schnitt multipizieren
um die Länge der langen Seite zu erhalten.</p></div>
<div class="paragraph"><p>Das ist eigentlich nicht allzu kompliziert, dennoch kommst Du manchmal durcheinander,
also schreibst Du die folgende Funktion:</p></div>
<div class="listingblock">
<div class="title">src/golden_rectangle.R</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>golden_rectangle  &lt;- function(b) {
    a &lt;- b * golden_ratio()
    return(c(<span style="color: #FF0000">"a"</span> = a, <span style="color: #FF0000">"b"</span> = b))
}</tt></pre></div></div>
<div class="paragraph"><p>Auch für diese Funktion schreibst Du einen Test:</p></div>
<div class="listingblock">
<div class="title">src/test_golden_rectangle.R</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>testthat::test_that(<span style="color: #FF0000">"Test on golden rectangle"</span>, {
                        b &lt;- 2
                        expectation &lt;- c(a = b * golden_ratio(), b = b)
                        result &lt;- golden_rectangle(b)
                        testthat::expect_identical(result, expectation)
})</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>covr::file_coverage(file.path(<span style="color: #FF0000">"src"</span>, c(<span style="color: #FF0000">"golden_ratio.R"</span>, <span style="color: #FF0000">"golden_rectangle.R"</span>)),
                    file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"test_golden_rectangle.R"</span>))</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Coverage: 100.00%</span></span>
</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## src/golden_ratio.R: 100.00%</span></span>
</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## src/golden_rectangle.R: 100.00%</span></span>
</tt></pre></div></div>
<div class="paragraph"><p>Du benutzt die Funtktion &#8230;</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>source(file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"golden_ratio.R"</span>))
width &lt;- 2
png(<span style="color: #FF0000">"p1.png"</span>, units = <span style="color: #FF0000">"cm"</span>, res = 400,
    width = width,
    height = golden_rectangle(width)[[<span style="color: #FF0000">"a"</span>]])
par(mar=c(1,1,1,1))
plot(cars)
dev.off()</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## pdf
##   2</code></pre>
</div></div>
<div class="paragraph"><p>und bist begeistert:</p></div>
<div class="imageblock">
<div class="content">
<img alt="p1.png"
src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAToAAAH9CAMAAAC9cUBiAAADAFBMVEUAAAABAQECAgIDAwMEBAQF
BQUGBgYHBwcICAgJCQkKCgoLCwsMDAwNDQ0ODg4PDw8QEBARERESEhITExMUFBQVFRUWFhYXFxcY
GBgZGRkaGhobGxscHBwdHR0eHh4fHx8gICAhISEiIiIjIyMkJCQlJSUmJiYnJycoKCgpKSkqKior
KyssLCwtLS0uLi4vLy8wMDAxMTEyMjIzMzM0NDQ1NTU2NjY3Nzc4ODg5OTk6Ojo7Ozs8PDw9PT0+
Pj4/Pz9AQEBBQUFCQkJDQ0NERERFRUVGRkZHR0dISEhJSUlKSkpLS0tMTExNTU1OTk5PT09QUFBR
UVFSUlJTU1NUVFRVVVVWVlZXV1dYWFhZWVlaWlpbW1tcXFxdXV1eXl5fX19gYGBhYWFiYmJjY2Nk
ZGRlZWVmZmZnZ2doaGhpaWlqampra2tsbGxtbW1ubm5vb29wcHBxcXFycnJzc3N0dHR1dXV2dnZ3
d3d4eHh5eXl6enp7e3t8fHx9fX1+fn5/f3+AgICBgYGCgoKDg4OEhISFhYWGhoaHh4eIiIiJiYmK
ioqLi4uMjIyNjY2Ojo6Pj4+QkJCRkZGSkpKTk5OUlJSVlZWWlpaXl5eYmJiZmZmampqbm5ucnJyd
nZ2enp6fn5+goKChoaGioqKjo6OkpKSlpaWmpqanp6eoqKipqamqqqqrq6usrKytra2urq6vr6+w
sLCxsbGysrKzs7O0tLS1tbW2tra3t7e4uLi5ubm6urq7u7u8vLy9vb2+vr6/v7/AwMDBwcHCwsLD
w8PExMTFxcXGxsbHx8fIyMjJycnKysrLy8vMzMzNzc3Ozs7Pz8/Q0NDR0dHS0tLT09PU1NTV1dXW
1tbX19fY2NjZ2dna2trb29vc3Nzd3d3e3t7f39/g4ODh4eHi4uLj4+Pk5OTl5eXm5ubn5+fo6Ojp
6enq6urr6+vs7Ozt7e3u7u7v7+/w8PDx8fHy8vLz8/P09PT19fX29vb39/f4+Pj5+fn6+vr7+/v8
/Pz9/f3+/v7////isF19AAAACXBIWXMAAD2EAAA9hAHVrK90AAAgAElEQVR4nO2dB3wURfvH9y6F
EELvoSRSBaVIRymRJr03pbcAIqiIUkWQYlBfRUUBQbqI8EpTaRFfiqBIkyLSpUVKgAABkpDk5r/P
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" />
</div>
<div class="title">Figure 1. Oh, wie schön!</div>
</div>
<div class="paragraph"><p>Du benutzt die Funktion eine Weile weiter, merkst dann aber, dass Du ja auch querformatige
Abbildungen erstellen willst und daher
bei gegebener Länge der
langen Seite diese durch den Goldenen Schnitt dividieren musst, um die Länge
der kurzen Seite zu erhalten.</p></div>
<div class="paragraph"><p>Jetzt kannst Du entweder eine neue Funktion schreiben oder die alte erweitern.
Da die Funktionalitäten zum selben Thema passen und <code>golden_rectangle</code> bislang
recht simpel ist, schreibst Du Deine Funktion also um:</p></div>
<div class="listingblock">
<div class="title">src/golden_rectangle.R</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>golden_rectangle  &lt;- function(value, landscape = TRUE) {
    phi &lt;- golden_ratio()
    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> (isTRUE(landscape)) {
        a  &lt;- value
        b &lt;- a / phi
    } <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> {
        b &lt;- value
        a &lt;- b * phi
    }
    return(c(<span style="color: #FF0000">"a"</span> = a, <span style="color: #FF0000">"b"</span> = b))
}</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>width &lt;- 4
png(<span style="color: #FF0000">"p2.png"</span>, units = <span style="color: #FF0000">"cm"</span>, res = 400,
    width = width,
    height = golden_rectangle(width)[[<span style="color: #FF0000">"b"</span>]])
par(mar=c(1,1,1,1))
plot(cars)
dev.off()</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## pdf
##   2</code></pre>
</div></div>
<div class="imageblock">
<div class="content">
<img alt="p2.png"
src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAnUAAAGFCAMAAACsU/XiAAADAFBMVEUAAAABAQECAgIDAwMEBAQF
BQUGBgYHBwcICAgJCQkKCgoLCwsMDAwNDQ0ODg4PDw8QEBARERESEhITExMUFBQVFRUWFhYXFxcY
GBgZGRkaGhobGxscHBwdHR0eHh4fHx8gICAhISEiIiIjIyMkJCQlJSUmJiYnJycoKCgpKSkqKior
KyssLCwtLS0uLi4vLy8wMDAxMTEyMjIzMzM0NDQ1NTU2NjY3Nzc4ODg5OTk6Ojo7Ozs8PDw9PT0+
Pj4/Pz9AQEBBQUFCQkJDQ0NERERFRUVGRkZHR0dISEhJSUlKSkpLS0tMTExNTU1OTk5PT09QUFBR
UVFSUlJTU1NUVFRVVVVWVlZXV1dYWFhZWVlaWlpbW1tcXFxdXV1eXl5fX19gYGBhYWFiYmJjY2Nk
ZGRlZWVmZmZnZ2doaGhpaWlqampra2tsbGxtbW1ubm5vb29wcHBxcXFycnJzc3N0dHR1dXV2dnZ3
d3d4eHh5eXl6enp7e3t8fHx9fX1+fn5/f3+AgICBgYGCgoKDg4OEhISFhYWGhoaHh4eIiIiJiYmK
ioqLi4uMjIyNjY2Ojo6Pj4+QkJCRkZGSkpKTk5OUlJSVlZWWlpaXl5eYmJiZmZmampqbm5ucnJyd
nZ2enp6fn5+goKChoaGioqKjo6OkpKSlpaWmpqanp6eoqKipqamqqqqrq6usrKytra2urq6vr6+w
sLCxsbGysrKzs7O0tLS1tbW2tra3t7e4uLi5ubm6urq7u7u8vLy9vb2+vr6/v7/AwMDBwcHCwsLD
w8PExMTFxcXGxsbHx8fIyMjJycnKysrLy8vMzMzNzc3Ozs7Pz8/Q0NDR0dHS0tLT09PU1NTV1dXW
1tbX19fY2NjZ2dna2trb29vc3Nzd3d3e3t7f39/g4ODh4eHi4uLj4+Pk5OTl5eXm5ubn5+fo6Ojp
6enq6urr6+vs7Ozt7e3u7u7v7+/w8PDx8fHy8vLz8/P09PT19fX29vb39/f4+Pj5+fn6+vr7+/v8
/Pz9/f3+/v7////isF19AAAACXBIWXMAAD2EAAA9hAHVrK90AAAgAElEQVR4nO2dB3gURRvH91II
gVBClyKhN5GOCCooQZpI0dAFlM4nCFiC9E4EaQJCQGkKCIooCoKANKVIR0FqAOm9p5Cy374zs332
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" />
</div>
<div class="title">Figure 2. Auch sehr schön!</div>
</div>
<div class="paragraph"><p>Herzlichen Glückwunsch, Du hast gerade die <a href="https://en.wikipedia.org/wiki/Application_programming_interface">Schnittstelle</a> Deiner Funktion zerschossen, indem Du ihr voreingestelltes Verhalten geändert hast.
Glücklicherweise hast Du einen Test, der Dir jetzt um die Ohren fliegt:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>covr::file_coverage(file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"golden_rectangle.R"</span>),
                    file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"test_golden_rectangle.R"</span>))</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Error: Test failed: 'Test on golden rectangle'</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## * `result` not identical to `expectation`.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## 2/2 mismatches (average diff: 1)</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## [1] 2.00 - 3.24 == -1.236</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## [2] 1.24 - 2.00 == -0.764</span></span>
</tt></pre></div></div>
<div class="paragraph"><p>Was bedeutet das?
Du musst entweder</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>alle</strong> Aufrufe der Funktion, die Du vor der Veränderung ihrer Schnittstelle progammiert hast,
  anpassen (indem Du <code>, landscape = FALSE</code> einfügst) oder
</p>
</li>
<li>
<p>
die Funktion so ändern, dass die Schnittstelle stabil bleibt (und der Test weiterhin funktioniert).
</p>
</li>
</ul></div>
<div class="paragraph"><p>Du entscheidest Dich, die Funktion zu ändern:</p></div>
<div class="listingblock">
<div class="title">src/golden_rectangle.R</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>golden_rectangle  &lt;- function(value, landscape = FALSE) {
    phi &lt;- golden_ratio()
    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> (isTRUE(landscape)) {
        a  &lt;- value
        b &lt;- a / phi
    } <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> {
        b &lt;- value
        a &lt;- b * phi
    }
    return(c(<span style="color: #FF0000">"a"</span> = a, <span style="color: #FF0000">"b"</span> = b))
}</tt></pre></div></div>
<div class="paragraph"><p>Um Querformatige Proportionen zu erhalten musst Du nun aktiv Querformat einstellen:
<code>golden_rectangle(width, landscape = TRUE)</code></p></div>
<div class="paragraph"><p>Der Test funktioniert wieder, da Du aber die Funktion geändert hast, überdeckt
er sie nicht mehr vollständig:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cov &lt;- covr::file_coverage(file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"golden_rectangle.R"</span>),
                    file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"test_golden_rectangle.R"</span>))
print(cov)</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Coverage: 71.43%</span></span>
</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## src/golden_rectangle.R: 71.43%</span></span>
</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>print(covr::zero_coverage(cov))</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>##                 filename        functions line value
## 3 src/golden_rectangle.R golden_rectangle    4     0
## 4 src/golden_rectangle.R golden_rectangle    5     0</code></pre>
</div></div>
<div class="paragraph"><p>Du erweiterst also Deine Testdatei an:</p></div>
<div class="listingblock">
<div class="title">src/test_golden_rectangle.R</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>testthat::test_that(<span style="color: #FF0000">"Test on golden rectangle"</span>, {
                        value &lt;- 2
                        expectation &lt;- c(a = value * golden_ratio(), b = value)
                        result &lt;- golden_rectangle(value)
                        testthat::expect_identical(result, expectation)
                        result &lt;- golden_rectangle(value * golden_ratio(), landscape = TRUE)
                        testthat::expect_identical(result, expectation)
})</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>covr::file_coverage(file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"golden_rectangle.R"</span>),
                    file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"test_golden_rectangle.R"</span>))</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Coverage: 100.00%</span></span>
</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## src/golden_rectangle.R: 100.00%</span></span>
</tt></pre></div></div>
<div class="paragraph"><p><code>golden_rectangle</code> habe ich mir nur ausgedacht, um Dir mein Vorgehen zu verdeutlichen. Aber:</p></div>
<div class="paragraph"><p><em>Ich teste fast alle meine Funktion nach genau dem Ablauf in diesem Abschnitt spätestens,
wenn ich sie in ein Paket verpacke.</em></p></div>
<div class="paragraph"><p><em>Du testest Deinen Code so oder so (zur Not auf die harte Tour, also bei der produktiven Anwendung),
das <a href="#_unit_testing">Unit Testing</a> ist nur eine hilfreiche Formalisierung,
nutze sie!
Und mit der <a href="#_code_coverage">Code Coverage</a> hast Du sogar eine M&ouml;glichkeit,
die G&uuml;te Deines Testens abzusch&auml;tzen.</em></p></div>
</div>
</div>
<div class="sect2">
<h3 id="_weniger_schlecht_programmieren">3.3. Weniger schlecht programmieren</h3>
<div class="paragraph"><p>Ich möchte Dir gerne noch drei Funktionen aus drei verschiedenen Paketen vorstellen,
die Dir helfen können, gut lesbare Funktionen zu schreiben.</p></div>
<div class="paragraph"><p><em>Ich nutze alle drei standardmäßig bei der Entwicklung von Paketen.</em></p></div>
<div class="paragraph"><p>Aber vorweg stelle ich Dir noch <a href="https://CRAN.R-project.org/package=codetools">codetools</a> vor, es gehört zur Gruppe der "<em>recommended</em> Packages" von <strong>R</strong> und kann Programmfehler finden.
Die drei anderen Pakete gibt es nur, weil <a href="https://CRAN.R-project.org/package=codetools">codetools</a> schon da war.</p></div>
<div class="paragraph"><p>Stell Dir vor, Du hättest in der Datei "src/code.R" folgende unschöne
und kaputte Funktion geschrieben:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>foo &lt;- function(this, func, has, way, too, many,args) {
    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> (TRUE) { <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> (TRUE) {
            <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> (TRUE) {
                <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> (TRUE) {
                    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> (TRUE) {
                        print(this_is_not_defined)
                    } <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> {
                        stop(<span style="color: #FF0000">"Foobar!"</span>)
                    }
                } <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> {
                    stop(<span style="color: #FF0000">"Foobar!"</span>)
                }
            } <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> {
                stop(<span style="color: #FF0000">"Foobar!"</span>)
            }
        } <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> {
            stop(<span style="color: #FF0000">"Foobar!"</span>)
        }
    } <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> {
        stop(<span style="color: #FF0000">"Foobar!"</span>)
    }
    return(invisible(NULL))
}</tt></pre></div></div>
<div class="sect3">
<h4 id="_code_prüfen_mit_a_href_https_cran_r_project_org_package_codetools_codetools_a">3.3.1. Code prüfen mit <a href="https://CRAN.R-project.org/package=codetools">codetools</a></h4>
<div class="paragraph"><p>In Deiner Funktion findet <a href="https://CRAN.R-project.org/package=codetools">codetools</a>
die nicht benutzten Funktionsargumente und das nicht definierte Objekt <code>this_is_not_defined</code>:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>source(file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"code.R"</span>))
codetools::checkUsage(foo, all = TRUE)</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## &lt;anonymous&gt;: no visible binding for global variable 'this_is_not_defined'
## &lt;anonymous&gt;: parameter 'args' may not be used
## &lt;anonymous&gt;: parameter 'func' may not be used
## &lt;anonymous&gt;: parameter 'has' may not be used
## &lt;anonymous&gt;: parameter 'many' may not be used
## &lt;anonymous&gt;: parameter 'this' may not be used
## &lt;anonymous&gt;: parameter 'too' may not be used
## &lt;anonymous&gt;: parameter 'way' may not be used</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_entflusen_mit_a_href_https_cran_r_project_org_package_lintr_lintr_a">3.3.2. Entflusen mit  <a href="https://CRAN.R-project.org/package=lintr">lintr</a></h4>
<div class="paragraph"><p>Das Paket <a href="https://CRAN.R-project.org/package=lintr">lintr</a> prüft Code auf Fussel,
das sind Abweichungen des Codes von Richtlinien zur übersichtlichen Formatierung.
Die Richtlinien (gegen die <a href="https://CRAN.R-project.org/package=lintr">lintr</a> prüft, und die sind gut, halte Dich an sie;
                 zu mehr über Progammierrichtlinien findest Du im <a href="https://gitlab.com/fvafrcu/programmierleitfaden/raw/master/programmierleitfaden.ps">Programmierleitfaden an der Forstlichen Versuchs- und Forschungsanstalt Baden-Württemberg</a>)
sehen unter anderem vor,
dass auf Kommas immer ein Leerzeichen folgen sollte,
dass auf öffnende geschweifte Klammern immer ein Zeilenumbruch folgen sollte und
dass eine Datei keine Leerzeilen am Ende enthalten sollte:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>lintr::lint(file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"code.R"</span>))</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## src/code.R:1:49: style: Commas should always have a space after.
## foo &lt;- function(this, func, has, way, too, many,args) {
##                                                 ^
## src/code.R:2:15: style: Opening curly braces should never go on their own line and should always be followed by a new line.
##     if (TRUE) { if (TRUE) {
##               ^
## src/code.R:6:31: warning: no visible binding for global variable 'this_is_not_defined'
##                         print(this_is_not_defined)
##                               ^~~~~~~~~~~~~~~~~~~
## src/code.R:24:1: style: Trailing blank lines are superfluous.
##
## ^</code></pre>
</div></div>
<div class="paragraph"><p>Das Paket kennt viele Optionen, lies Dir die Hilfe durch!</p></div>
<div class="paragraph"><p>Seit Ende 2017 gibt es auch das Paket <a href="https://CRAN.R-project.org/package=styler">styler</a>,
welches Code (auch in Dateien) umformatiert und in meinen Augen deutlich bessere
Ergebnisse bringt als <a href="https://CRAN.R-project.org/package=formatR">formatR</a>.
Ich nutze <a href="https://CRAN.R-project.org/package=styler">styler</a>, wenn
ich richtig schlecht geschriebenen Code lesen muss.</p></div>
</div>
<div class="sect3">
<h4 id="_code_säubern_mit_a_href_https_cran_r_project_org_package_cleanr_cleanr_a">3.3.3. Code säubern mit  <a href="https://CRAN.R-project.org/package=cleanr">cleanr</a></h4>
<div class="paragraph"><p>Das Paket <a href="https://CRAN.R-project.org/package=cleanr">cleanr</a> prüft die Länge und (Zeilen-) Breite von Funktionen und Codedateien und
die Verschachtelungstiefe von Funktionen, ihre Argumentenanzahl und ob sie einen expliziten
Rückgabewert haben.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>print(suppressWarnings(cleanr::check_file(file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"code.R"</span>))))</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Error in cleanr::check_file(file.path("src", "code.R")):  src/code.R  foo  found 7 arguments, max_num_arguments was 5</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## foo  found nesting depth 4, max_nesting_depth was 3</span></span>
</tt></pre></div></div>
<div class="paragraph"><p>Auch dieses Paket kennt viele Optionen, lies Dir die Hilfe durch!</p></div>
</div>
<div class="sect3">
<h4 id="_cyclomatic_complexity_prüfen_mit_a_href_https_cran_r_project_org_package_cyclocomp_cyclocomp_a">3.3.4. Cyclomatic Complexity prüfen mit <a href="https://CRAN.R-project.org/package=cyclocomp">cyclocomp</a></h4>
<div class="paragraph"><p>McCabes "cyclomatic complexity" (<a href="#cyc">[cyc]</a>) mißt die
Komplexität von Programmcode.
Mit ihr kannst Du prüfen, ob Deine Funktionen einfach genug sind.</p></div>
<div class="paragraph"><p>Insbesondere gibt Dir die "cyclomatic complexity" eine Idee davon, wie viele Testfälle Du
für eine Funktion schreiben solltest
(genau genommen ist sie eine obere Grenze für die Anzahl der für vollständige <a href="https://en.wikipedia.org/wiki/Code_coverage">branch coverage</a> benötigten Testfälle).
Für Deine hässliche Funktion bräuchtest Du also
6 Testfälle:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cyclocomp::cyclocomp(parse(text = readLines(file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"code.R"</span>))))</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## [1] 6</code></pre>
</div></div>
<div class="paragraph"><p>Allgemein gilt: je höher die "cyclomatic complexity", desto unverständlicher der Code.
McCabe empfiehlt eine "cyclomatic complexity" von nicht mehr als 10 für eine Funktion. Und der war professioneller Programmierer des Departement of Defense der National Security Agency. Bei einer "cyclomatic complexity"  von 20 dürfte es selbst für professionelle Programmiererinnen langsam schwierig werden, die Absicht hinter Deinem Code zu verstehen. Wenn Du eine "cyclomatic complexity" von mehr als 40 schaffst, hast Du vielleicht eine Funktion geschrieben, die tut, was sie soll, aber ziemlich sicher eine, die kaum ein Mensch mehr versteht.</p></div>
<div class="paragraph"><p>Natürlich gibt es immer Ausnahmen von der Regel. Die Funktion <code>devtools::release</code> beispielsweise
hat eine ganze Reihe von interaktiven Abfragen des Typs</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">if</span></span> (yesno(<span style="color: #FF0000">"Were devtool's checks successful?"</span>))
  return(invisible())</tt></pre></div></div>
<div class="paragraph"><p>Diese treiben die "cyclomatic complexity" in die Höhe (weil die <code>return</code>-Anweisungen
                                                        viele verschiedene mögliche Endpunkte der Funktion definieren. Eine wohlstrukturierte Funktion hat <em>genau einen</em> <a href="https://en.wikipedia.org/wiki/Structured_programming#Early_exit">"exit node"</a>):</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>source(file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"release.R"</span>))
cyclocomp::cyclocomp(release)</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## [1] 44</code></pre>
</div></div>
<div class="paragraph"><p>Dabei ist die Funktion lediglich schwer verdaulich und nicht völlig unlesbar.
Dennoch sollte Hadley Wickham die Funktion dringend entrümpeln:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>linters &lt;- lintr::default_linters[names(lintr::default_linters )!= <span style="color: #FF0000">"object_usage_linter"</span>]
lintr::lint(file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"release.R"</span>), linters = linters)</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## src/release.R:70:1: style: lines should not be more than 80 characters.
##     if (yesno("Is documentation free of spelling errors? (you can ignore false positives)"))
## ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
## src/release.R:87:40: warning: Do not use absolute paths.
##     cran_url &lt;- paste0(cran_mirror(), "/web/checks/check_results_",
##                                        ^~~~
## src/release.R:100:49: style: Commas should never have a space before.
##     msg &lt;- paste0("Have you checked the ", deps ," packages that depend on ",
##                                                ~^
## src/release.R:100:50: style: Commas should always have a space after.
##     msg &lt;- paste0("Have you checked the ", deps ," packages that depend on ",
##                                                  ^
## src/release.R:166:1: style: lines should not be more than 80 characters.
##   yeses &lt;- c("Yes", "Definitely", "For sure", "Yup", "Yeah", "I agree", "Absolutely")
## ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
## src/release.R:187:53: style: Closing curly-braces should always be on their own line, unless it's followed by an else.
##     utils::browseURL(url, browser = email_browser())},
##                                                     ^
## src/release.R:301:17: style: Variable and function names should be all lowercase.
##   new_url$query$strErr
##                 ^~~~~~</code></pre>
</div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>suppressWarnings(cleanr::check_file(file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"release.R"</span>)))</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Error in cleanr::check_file(file.path("src", "release.R")):  src/release.R: line 70 counts 92 characters.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## src/release.R: line 166 counts 85 characters.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## src/release.R: 325 lines in file.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">##  src/release.R  as.object_size  found no return() statement at all.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## src/release.R  build_cran  found no return() statement at all.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## src/release.R  cran_comments  found no return() statement at all.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## src/release.R  email  found no return() statement at all.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## src/release.R  email_browser  found no return() statement at all.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## src/release.R  maintainer  found no return() statement at all.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## src/release.R  release  line 24: found width 92 max_line_width was 80</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## release  found 98 lines, max_lines was 65</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## release  found 97 lines of code, max_lines_of_code was 50</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## release  found no return() statement at all.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## src/release.R  release_email  found no return() statement at all.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## src/release.R  submit_cran  found no return() statement at all.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## src/release.R  upload_cran  found no return() statement at all.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## src/release.R  yesno  line 1: found width 85 max_line_width was 80</span></span>
<span style="font-style: italic"><span style="color: #9A1900">## yesno  found no return() statement at all.</span></span>
</tt></pre></div></div>
</div>
</div>
<div class="sect2">
<h3 id="_funktionen_dokumentieren">3.4. Funktionen dokumentieren</h3>
<div class="paragraph"><p>Wenn Du Hilfe zu einer Funktion in <strong>R</strong> suchst, kannst Du unter anderem die
<strong>R</strong>-Hilfe mit <code>help(topic)</code> oder der Kurzform <code>?topic</code> aufrufen, bei Paketen findest Du
die selbe Information auch immer als pdf beigelegt.</p></div>
<div class="paragraph"><p>Solche Hilfeformate kannst Du für Deine Funktionen auch schreiben.</p></div>
<div class="sect3">
<h4 id="_warum_solltest_du_deine_funktionen_dokumentieren">3.4.1. Warum solltest Du Deine Funktionen dokumentieren?</h4>
<div class="paragraph"><p>Wenn Du Funktionen dokumentierst, erklärst Du einer anderen Person, was die Funktion
tun sollte. Wenn Du das schaffst, kannst Du Dir einigermaßen sicher sein,
dass Du weißt, was die Funktion tut und dass es richtig war,
sie (und nicht eine etwas andere) zu schreiben.</p></div>
<div class="paragraph"><p>Außerdem ist es von dokumentierten Funktionen zu Paketen nicht mehr weit,
was ihre <a href="#_als_paket">Verwaltung</a> deutlich erleichtert.</p></div>
<div class="paragraph"><p>Nehmen wir unser <a href="#_was_soll_die_ganze_testerei">Beispiel zum Goldenen Schnitt</a>:</p></div>
<div class="paragraph"><p>Du merkst, dass Du die Funktion <code>golden_ratio</code> eigentlich nur innerhalb
von <code>golden_rectangle</code> benutzt und letzteres kein glücklicher Name ist, weil
Du die Funktion zwar zum Errechnen von Seitenlängen von Graphiken nutzt, sie
ja aber ganz allgemein den Goldenen Schnitt ausrechnet.
Du entschließt Dich daher, die interne Funktion in
<code>.golden_ratio</code> (der führende Punkt ist eine Konvention, die aus der UNIX-Welt stammt,
                 dort werden (vorwiegend Konfigurations-) Dateien mit einem führenden Punkt
                 aus dem directory listing ausgeschlossen (unter Windows heißen diese Dateien "versteckt")
                &#8201;&#8212;&#8201;in <strong>R</strong> kennzeichnet die Konvention interne Funktionen, die gewöhnlich
                 nicht direkt aufgerufen werden (sollten))
                 und <code>golden_rectangle</code> in <code>golden_ratio</code> umzubenennen.
Dazu musst Du</p></div>
<div class="ulist"><ul>
<li>
<p>
die Funktionsdateien und die zugehörigen Testdateien umbenennen,
</p>
</li>
<li>
<p>
die Namen in den Funktionsdefinitionen ändern und
</p>
</li>
<li>
<p>
die Namen in den Funktionsaufrufen ändern.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Das kannst Du von Hand machen, oder Du schreibst folgende Funktionen:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>substitute_function &lt;- function(from, to, file_name) {
        patterns &lt;- c(definition_pattern = paste0(from, <span style="color: #FF0000">"( *&lt;-)"</span>),
                      call_pattern = paste0(from, <span style="color: #FF0000">"(</span><span style="color: #CC33CC">\\</span><span style="color: #FF0000">()"</span>))
        x &lt;- readLines(file_name)
        <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> (pattern in patterns)
            x &lt;- sub(pattern, paste0(to, <span style="color: #FF0000">"</span><span style="color: #CC33CC">\\</span><span style="color: #FF0000">1"</span>), x)

        writeLines(x, con = file_name)

}

rename_function &lt;- function(from, to, directory = <span style="color: #FF0000">"."</span>) {
    file_names &lt;- list.files(directory, full.names = TRUE,
                             pattern = paste0(<span style="color: #FF0000">"^(test_|)"</span>, from, <span style="color: #FF0000">"</span><span style="color: #CC33CC">\\</span><span style="color: #FF0000">.[rR]$"</span>)
                             )
    new_file_names &lt;- NULL

    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> (file_name in file_names) {

        substitute_function(from = from, to = to, file_name = file_name)
        new_file_name &lt;- file.path(dirname(file_name),
                                   sub(from, to, basename(file_name)))
        file.rename(file_name, new_file_name)
        new_file_names &lt;- c(new_file_names, new_file_name)
    }
    return(new_file_names)
}</tt></pre></div></div>
<div class="paragraph"><p>Diese Funktionen leben ja von Nebenwirkungen, sie sind schwer zu testen und wir hoffen also, dass Du keine Fehler gemachst hast.</p></div>
<div class="paragraph"><p>Funktionieren tut das so:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>rename_function(from = <span style="color: #FF0000">"golden_ratio"</span>, to = <span style="color: #FF0000">".golden_ratio"</span>,
                 directory = <span style="color: #FF0000">"src"</span>)</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## [1] "src/.golden_ratio.R"      "src/test_.golden_ratio.R"</code></pre>
</div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># replace calls to golden_ratio()!</span></span>
substitute_function(from = <span style="color: #FF0000">"golden_ratio"</span>, to = <span style="color: #FF0000">".golden_ratio"</span>,
                 file_name = file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"test_golden_rectangle.R"</span>))
substitute_function(from = <span style="color: #FF0000">"golden_ratio"</span>, to = <span style="color: #FF0000">".golden_ratio"</span>,
                 file_name = file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"golden_rectangle.R"</span>))
rename_function(from = <span style="color: #FF0000">"golden_rectangle"</span>, to = <span style="color: #FF0000">"golden_ratio"</span>,
                 directory = <span style="color: #FF0000">"src"</span>)</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## [1] "src/golden_ratio.R"      "src/test_golden_ratio.R"</code></pre>
</div></div>
<div class="paragraph"><p>Du testest natürlich Deine neuen Dateien:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>covr::file_coverage(file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">".golden_ratio.R"</span>),
                    file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"test_.golden_ratio.R"</span>))</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>covr::file_coverage(file.path(<span style="color: #FF0000">"src"</span>, c(<span style="color: #FF0000">"golden_ratio.R"</span>, <span style="color: #FF0000">".golden_ratio.R"</span>)),
                    file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"test_golden_ratio.R"</span>))</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## Coverage: 100.00%</span></span>
</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## src/golden_ratio.R: 100.00%</span></span>
</tt></pre></div></div>
<div class="paragraph"><p>Scheint geklappt zu haben.</p></div>
<div class="paragraph"><p>Du siehst also, dass Du Deine Funktionen verändert hast, <em>weil</em> Du sie dokumentieren
willst.</p></div>
</div>
<div class="sect3">
<h4 id="_wie_kannst_du_funktionen_dokumentieren">3.4.2. Wie kannst Du Funktionen dokumentieren?</h4>
<div class="paragraph"><p>Das <strong>R</strong>-Hilfeformat wird <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Writing-R-documentation-files">hier</a>
beschrieben, ich rate Dir aber, <a href="https://cran.r-project.org/web/packages/roxygen2/index.html">roxygen2</a> zu
benutzen (<a href="http://r-pkgs.had.co.nz/man.html">hier</a> gibt Hadley Wickham eine druckreife Einführung).</p></div>
<div class="paragraph"><p>Du veränderst also Deine Funktionsdatei, in dem Du Dokumentationskommentare einfügst:</p></div>
<div class="listingblock">
<div class="title">src/golden_ratio.R</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#' Compute the Other Quantity in Golden Ratio</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#'</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' See \url{https://en.wikipedia.org/wiki/Golden_ratio} for an introduction to</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' the Golden Ratio.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#'</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' Specify \code{value = 1} to obtain the Golden Ratio itself in element "a" of</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' the return value.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' @param value A Quantity.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' @param landscape Is the quantity given by \code{value} the larger one ("a")?</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' @return A vector giving the quantities "a" and "b".</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' @export</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' @examples</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' print(golden_ratio(value = 1)[["a"]])</span></span>
golden_ratio  &lt;- function(value, landscape = FALSE) {
    phi &lt;- .golden_ratio()
    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> (isTRUE(landscape)) {
        a  &lt;- value
        b &lt;- a / phi
    } <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> {
        b &lt;- value
        a &lt;- b * phi
    }
    return(c(<span style="color: #FF0000">"a"</span> = a, <span style="color: #FF0000">"b"</span> = b))
}</tt></pre></div></div>
<div class="paragraph"><p>und weil dokumentieren Dir so viel Spaß bereit, dokumentierst Du gleich auch
die interne Funktion (interne Funktionen zu dokumentieren ist ein wenig umstritten,
                      ich finde es gut).</p></div>
<div class="listingblock">
<div class="title">src/.golden_ratio.R</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#' Compute the Golden Ratio</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#'</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' See \url{https://en.wikipedia.org/wiki/Golden_ratio} for an introduction to</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' the Golden Ratio.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#'</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' @return The Golden Ratio</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' @keywords internal</span></span>
.golden_ratio  &lt;- function() {
    phi &lt;- (1 + sqrt(5)) / 2
    return(phi)
}</tt></pre></div></div>
<div class="paragraph"><p>Was hast Du davon, außer Arbeit?</p></div>
<div class="paragraph"><p>Wenn Du Deine beiden Funktionen in eine Datei schreibst</p></div>
<div class="listingblock">
<div class="title">src/golden_ratios.R</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#' Compute the Golden Ratio</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#'</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' See \url{https://en.wikipedia.org/wiki/Golden_ratio} for an introduction to</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' the Golden Ratio.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#'</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' @return The Golden Ratio</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' @keywords internal</span></span>
.golden_ratio  &lt;- function() {
    phi &lt;- (1 + sqrt(5)) / 2
    return(phi)
}

<span style="font-style: italic"><span style="color: #9A1900">#' Compute the Other Quantity in Golden Ratio</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#'</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' See \url{https://en.wikipedia.org/wiki/Golden_ratio} for an introduction to</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' the Golden Ratio.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#'</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' Specify \code{value = 1} to obtain the Golden Ratio itself in element "a" of</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' the return value.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' @param value A Quantity.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' @param landscape Is the quantity given by \code{value} the larger one ("a")?</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' @return A vector giving the quantities "a" and "b".</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' @export</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' @examples</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' print(golden_ratio(value = 1)[["a"]])</span></span>
golden_ratio  &lt;- function(value, landscape = FALSE) {
    phi &lt;- .golden_ratio()
    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> (isTRUE(landscape)) {
        a  &lt;- value
        b &lt;- a / phi
    } <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> {
        b &lt;- value
        a &lt;- b * phi
    }
    return(c(<span style="color: #FF0000">"a"</span> = a, <span style="color: #FF0000">"b"</span> = b))
}</tt></pre></div></div>
<div class="paragraph"><p>kannst Du mit dem Paket <a href="https://CRAN.R-project.org/package=document">document</a> Hilfe-Dateien erstellen,
wie Du sie aus <strong>R</strong> kennst:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>document::document(file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"golden_ratios.R"</span>), output_directory = <span style="color: #FF0000">"."</span>)</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>list.files(pattern = <span style="color: #FF0000">"^golden.*"</span>, full.names = TRUE)</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## [1] "./golden_ratios.html" "./golden_ratios.pdf"  "./golden_ratios.txt"</code></pre>
</div></div>
<div class="paragraph"><p>Außerdem kannst Du mit <a href="https://CRAN.R-project.org/package=document">document</a> nach der Erstellung der Hilfe-Dateien
in einer laufenden <strong>R</strong>-Sitzung die Hilfe zu Deiner Funktion ansehen:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>document::man(<span style="color: #FF0000">"golden_ratio"</span>)</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>Compute the Other Quantity in Golden Ratio

Description:

     See &lt;URL: https://en.wikipedia.org/wiki/Golden_ratio&gt; for an
     introduction to the Golden Ratio.

Usage:

     golden_ratio(value, landscape = FALSE)

Arguments:

   value: A Quantity.

landscape: Is the quantity given by ‘value’ the larger one ("a")?

Details:

     Specify ‘value = 1’ to obtain the Golden Ratio itself in element
     "a" of the return value.

Value:

     A vector giving the quantities "a" and "b".

Examples:

     print(golden_ratio(value = 1)[["a"]])</code></pre>
</div></div>
<div class="paragraph"><p>Und zum Dritten und Wichtigsten: Du hast Deine Funktionen dokumentiert und ihre
Schnittstellen beschrieben. Sie sind jetzt <a href="#_paketieren">paketierungsreif</a>.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_paketieren">3.5. Paketieren</h3>
<div class="paragraph"><p>Zum Paketieren nimmst Du wieder die getrennten Funktionsdateien,
<code>src/golden_ratio.R</code> und <code>src/.golden_ratio.R</code> und ihre zugehörigen Testdateien.</p></div>
<div class="paragraph"><p>Damit sie den Paketanforderungen genügen, musst Du noch zwei kleine
Änderungen vornehmen: <code>golden_ratio.R</code> braucht noch einen
Verweis darauf, dass interne Funktionen in <code>golden_ratio_internals.R</code> stehen</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>code &lt;- c(<span style="color: #FF0000">"#' @include golden_ratio_internals.R"</span>, <span style="color: #FF0000">"NULL"</span>, <span style="color: #FF0000">""</span>,
          readLines(file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"golden_ratio.R"</span>)))
writeLines(code, file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">"golden_ratio.R"</span>))</tt></pre></div></div>
<div class="listingblock">
<div class="title">src/golden_ratio.R</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#' @include golden_ratio_internals.R</span></span>
NULL

<span style="font-style: italic"><span style="color: #9A1900">#' Compute the Other Quantity in Golden Ratio</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#'</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' See \url{https://en.wikipedia.org/wiki/Golden_ratio} for an introduction to</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' the Golden Ratio.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#'</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' Specify \code{value = 1} to obtain the Golden Ratio itself in element "a" of</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' the return value.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' @param value A Quantity.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' @param landscape Is the quantity given by \code{value} the larger one ("a")?</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' @return A vector giving the quantities "a" and "b".</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' @export</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' @examples</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' print(golden_ratio(value = 1)[["a"]])</span></span>
golden_ratio  &lt;- function(value, landscape = FALSE) {
    phi &lt;- .golden_ratio()
    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> (isTRUE(landscape)) {
        a  &lt;- value
        b &lt;- a / phi
    } <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> {
        b &lt;- value
        a &lt;- b * phi
    }
    return(c(<span style="color: #FF0000">"a"</span> = a, <span style="color: #FF0000">"b"</span> = b))
}</tt></pre></div></div>
<div class="paragraph"><p>und die Dokumentation für <code>.golden_ratio</code> sollte in eine Datei geschrieben
werden, deren Name nicht mit einem Punkt beginnt
(der Name der Hilfedatei wird, wenn Du ihn nicht explizit angibst, aus dem der
dokumentierten Funktion abgeleitet)</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>code &lt;- readLines(file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">".golden_ratio.R"</span>))
return_line &lt;- grep(<span style="color: #FF0000">"@return"</span>, code)
code_upper &lt;- code[1:return_line]
code_lower &lt;- code[(return_line + 1):length(code)]
code &lt;- c(code_upper, <span style="color: #FF0000">"#' @rdname internals"</span>, code_lower)
writeLines(code, file.path(<span style="color: #FF0000">"src"</span>, <span style="color: #FF0000">".golden_ratio.R"</span>))</tt></pre></div></div>
<div class="listingblock">
<div class="title">src/.golden_ratio.R</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#' Compute the Golden Ratio</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#'</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' See \url{https://en.wikipedia.org/wiki/Golden_ratio} for an introduction to</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' the Golden Ratio.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#'</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' @return The Golden Ratio</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' @rdname internals</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#' @keywords internal</span></span>
.golden_ratio  &lt;- function() {
    phi &lt;- (1 + sqrt(5)) / 2
    return(phi)
}</tt></pre></div></div>
<div class="paragraph"><p>Du erstellst eine Paketvorlage und kopierst die Dateien hinein:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># Create package skeleton</span></span>
package_name &lt;- <span style="color: #FF0000">"mytools"</span>
package_dir &lt;- file.path(dirname(tempdir()), package_name)
unlink(package_dir, recursive = TRUE) <span style="font-style: italic"><span style="color: #9A1900"># make sure it's not there</span></span>
devtools::create(package_dir)
<span style="font-style: italic"><span style="color: #9A1900"># add source files</span></span>
file.copy(from = file.path(<span style="color: #FF0000">"src"</span>, c(<span style="color: #FF0000">"golden_ratio.R"</span>, <span style="color: #FF0000">".golden_ratio.R"</span>)),
          to = file.path(package_dir, <span style="color: #FF0000">"R"</span>))
<span style="font-style: italic"><span style="color: #9A1900"># rename the hidden file, package will not build otherwise:</span></span>
file.rename(file.path(package_dir, <span style="color: #FF0000">"R"</span>, <span style="color: #FF0000">".golden_ratio.R"</span>),
            file.path(package_dir, <span style="color: #FF0000">"R"</span>, <span style="color: #FF0000">"golden_ratio_internals.R"</span>))
<span style="font-style: italic"><span style="color: #9A1900"># create package's testing skeleton</span></span>
devtools::use_testthat(package_dir)
<span style="font-style: italic"><span style="color: #9A1900"># add test files</span></span>
file.copy(from = file.path(<span style="color: #FF0000">"src"</span>, c(<span style="color: #FF0000">"test_golden_ratio.R"</span>,
                                    <span style="color: #FF0000">"test_.golden_ratio.R"</span>)),
                           file.path(package_dir, <span style="color: #FF0000">"tests"</span>, <span style="color: #FF0000">"testthat"</span>))
<span style="font-style: italic"><span style="color: #9A1900"># build the docs</span></span>
roxygen2::roxygenize(package_dir)
<span style="font-style: italic"><span style="color: #9A1900"># Set package Metadata</span></span>
desc::desc_set_authors(person(given = <span style="color: #FF0000">"Your"</span>, family = <span style="color: #FF0000">"Name"</span>,
                              role = c(<span style="color: #FF0000">"aut"</span>, <span style="color: #FF0000">"cre"</span>),
                              email = <span style="color: #FF0000">"your.name@somewhe.re"</span>),
                       file = package_dir, normalize = TRUE)
desc::desc_bump_version(<span style="color: #FF0000">"minor"</span>, package_dir)
<span style="font-style: italic"><span style="color: #9A1900">## Fix some more metadata</span></span>
d &lt;- desc::desc(package_dir)
<span style="font-style: italic"><span style="color: #9A1900">### Use title case</span></span>
d$set(Title = tools::toTitleCase(d$get(<span style="color: #FF0000">"Title"</span>)))
<span style="font-style: italic"><span style="color: #9A1900">### Set package License</span></span>
d$set(License = <span style="color: #FF0000">"GPL"</span>)
d$write()</tt></pre></div></div>
<div class="paragraph"><p>Nun kannst Du das Paket prüfen:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>check &lt;- rcmdcheck::rcmdcheck(package_dir, args = <span style="color: #FF0000">"--as-cran"</span>)</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>print(check)</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>##
## ── R CMD check results ───────────────────────────────── mytools 0.1.0 ────
##
## ❯ checking CRAN incoming feasibility ... NOTE
##   Maintainer: ‘Your Name &lt;your.name@somewhe.re&gt;’
##
##   New submission
##
## ── 0 errors ✔ | 0 warnings ✔ | 1 note ✖</code></pre>
</div></div>
<div class="paragraph"><p>Nun ja, Du hast die Metadaten noch nicht angepasst. Solltest Du noch tun.</p></div>
<div class="paragraph"><p>Du kannst Dein Paket auch testen:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>covr::package_coverage(package_dir)</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## mytools Coverage: 100.00%</span></span>
</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## R/golden_ratio_internals.R: 100.00%</span></span>
</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">## R/golden_ratio.R: 100.00%</span></span>
</tt></pre></div></div>
<div class="paragraph"><p>Und Du solltest immer auch die Deine <a href="#_weniger_schlecht_programmieren">drei Freunde</a>  <a href="https://CRAN.R-project.org/package=lintr">lintr</a>, <a href="https://CRAN.R-project.org/package=cleanr">cleanr</a> und <a href="https://CRAN.R-project.org/package=cyclocomp">cyclocomp</a>
fragen (wobei <a href="https://CRAN.R-project.org/package=lintr">lintr</a> hier die vorhandene Funktion
        <code>.golden_ratio()</code> <em>nicht</em> erkennt
        <span class="footnote"><br />[Das ist ein altes Problem, siehe <a href="https://github.com/jimhester/lintr/issues/27">https://github.com/jimhester/lintr/issues/27</a>. Wenn Du mit <code>devtools::install(package_dir)</code> das Paket installierst, verschwindet die falsch positive Warnung.]<br /></span> und <a href="https://CRAN.R-project.org/package=cyclocomp">cyclocomp</a>
        ebenfalls nicht
        <span class="footnote"><br />[In Version 1.1.0 des Pakets ruft <code>cyclocomp::cyclocomp_package_dir</code> die Funktion <code>cyclocomp::cyclocomp_package</code> und diese <code>ls(asNamespace(package))</code>, wobei <code>package</code> das aktuelle Paket, hier also "mytools", ist und <code>ls</code> mit der Voreinstellung <code>all.names = FALSE</code> Objekte mit einem führenden Punkt nicht auflistet.]<br /></span>
        und daher keine <code>cyclomatic complexity</code> für sie berechnet):</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>print(lintr::lint_package(package_dir))</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## R/golden_ratio.R:18:12: warning: no visible global function definition for '.golden_ratio', Did you mean 'golden_ratio'?
##     phi &lt;- .golden_ratio()
##            ^~~~~~~~~~~~~
## tests/testthat/test_golden_ratio.R:6:1: style: lines should not be more than 80 characters.
##                         result &lt;- golden_ratio(value * .golden_ratio(), landscape = TRUE)
## ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</code></pre>
</div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>print(suppressWarnings(cleanr::check_directory(package_dir)))</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## [1] TRUE</code></pre>
</div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>print(cyclocomp::cyclocomp_package_dir(package_dir))</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>##           name cyclocomp
## 1 golden_ratio         2</code></pre>
</div></div>
<div class="paragraph"><p>Gut! Das wird jetzt verpackt:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>withr::with_dir(dirname(package_dir),
                callr::rcmd_safe(<span style="color: #FF0000">"build"</span>, basename(package_dir)))</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## $status
## [1] 0
##
## $stdout
## [1] "* checking for file ‘mytools/DESCRIPTION’ ... OK\n* preparing ‘mytools’:\n* checking DESCRIPTION meta-information ... OK\n* checking for LF line-endings in source and make files\n* checking for empty or unneeded directories\n* building ‘mytools_0.1.0.tar.gz’\n"
##
## $stderr
## [1] "\n"
##
## $timeout
## [1] FALSE
##
## $command
## [1] "/usr/lib/R/bin/R" "CMD"              "build"
## [4] "mytools"</code></pre>
</div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>package_path &lt;- paste0(package_dir, <span style="color: #FF0000">"_0.1.0.tar.gz"</span>)
<span style="font-weight: bold"><span style="color: #0000FF">if</span></span> (file.exists(package_path)) print(package_path)</tt></pre></div></div>
<div class="listingblock">
<div class="content">
<pre><code>## [1] "/tmp/mytools_0.1.0.tar.gz"</code></pre>
</div></div>
<div class="paragraph"><p>Paket fertig. Die Metadaten sind natürlich gelogen (Du solltest die Datei <code>DESCRIPTION</code> anpassen, Du solltest eine Datei <code>NEWS.md</code> pflegen, Du solltest ein <a href="https://de.wikipedia.org/wiki/Versionsverwaltung">version control system</a> benutzten), aber funktional ist es korrekt.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bibliographie">4. Bibliographie</h2>
<div class="sectionbody">
<div class="ulist bibliography"><ul>
<li>
<p>
<a id="cc"></a>[cc] R.C. Martin. 2008. <em>Clean Code: A Handbook of Agile Software Craftsmanship</em>.
    Pearson Education.
</p>
</li>
<li>
<p>
<a id="cyc"></a>[cyc]  T. J. McCabe, 1976. <em>A Complexity Measure</em>
   IEEE Transactions on Software Engineering archive.
   Volume 2, Issue 4, Pages 308-320
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated
 2018-07-20 08:40:30 CEST
</div>
</div>
</body>
</html>
